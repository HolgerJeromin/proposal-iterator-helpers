<!doctype html>
<head><meta charset="utf-8">
<title>Iterator Helpers</title><script src="ecmarkup.js?cache=c3VoCSaZ" defer=""></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/base16/solarized-light.min.css"><link rel="stylesheet" href="ecmarkup.css"></head><body><div id="shortcuts-help">
<ul>
  <li><span>Toggle shortcuts help</span><code>?</code></li>
  <li><span>Toggle "can call user code" annotations</span><code>u</code></li>

  <li><span>Jump to search box</span><code>/</code></li>
</ul></div><div id="menu-toggle"><svg xmlns="http://www.w3.org/2000/svg" style="width:100%; height:100%; stroke:currentColor" viewBox="0 0 120 120">
      <title>Menu</title>
      <path stroke-width="10" stroke-linecap="round" d="M30,60 h60  M30,30 m0,5 h60  M30,90 m0,-5 h60"></path>
    </svg></div><div id="menu-spacer" class="menu-spacer"></div><div id="menu"><div id="menu-search"><input type="text" id="menu-search-box" placeholder="Search..."><div id="menu-search-results" class="inactive"></div></div><div id="menu-pins"><div class="menu-pane-header">Pins</div><ul id="menu-pins-list"></ul></div><div class="menu-pane-header">Table of Contents</div><div id="menu-toc"><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-well-known-intrinsic-objects" title="Well-Known Intrinsic Objects"><span class="secnum">1</span> Well-Known Intrinsic Objects</a></li><li><span class="item-toggle">◢</span><a href="#sec-built-in-function-objects" title="Built-in Function Objects"><span class="secnum">2</span> Built-in Function Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-createbuiltinfunction" title="CreateBuiltinFunction ( behaviour, length, name, additionalInternalSlotsList [ , realm [ , prototype [ , prefix ] ] ] )"><span class="secnum">2.1</span> CreateBuiltinFunction ( <var>behaviour</var>, <var>length</var>, <var>name</var>, <var>additionalInternalSlotsList</var> [ , <var>realm</var> [ , <var>prototype</var> [ , <var>prefix</var> ] ] ] )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-built-in-async-function-objects" title="Built-in Async Function Objects"><span class="secnum">3</span> Built-in Async Function Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-built-in-function-objects-call-thisargument-argumentslist" title="[[Call]] ( thisArgument, argumentsList )"><span class="secnum">3.1</span> [[Call]] ( <var>thisArgument</var>, <var>argumentsList</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-built-in-function-objects-construct-argumentslist-newtarget" title="[[Construct]] ( argumentsList, newTarget )"><span class="secnum">3.2</span> [[Construct]] ( <var>argumentsList</var>, <var>newTarget</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-abstract-operations" title="Abstract Operations"><span class="secnum">4</span> Abstract Operations</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-operations-on-iterator-objects" title="Operations on Iterator Objects"><span class="secnum">4.1</span> Operations on Iterator Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-getiteratordirect" title="GetIteratorDirect ( obj )"><span class="secnum">4.1.1</span> GetIteratorDirect ( <var>obj</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-control-abstraction-objects" title="Control Abstraction Objects"><span class="secnum">5</span> Control Abstraction Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-iteration" title="Iteration"><span class="secnum">5.1</span> Iteration</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-iterator-abstract-operations" title="Iterator Abstract Operations"><span class="secnum">5.1.1</span> Iterator Abstract Operations</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-ifabruptcloseasynciterator" title="IfAbruptCloseAsyncIterator ( value, iteratorRecord )"><span class="secnum">5.1.1.1</span> IfAbruptCloseAsyncIterator ( <var>value</var>, <var>iteratorRecord</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-iterator-objects" title="Iterator Objects"><span class="secnum">5.1.2</span> Iterator Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-iterator-constructor" title="The Iterator Constructor"><span class="secnum">5.1.2.1</span> The Iterator Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-iterator" title="Iterator ( )"><span class="secnum">5.1.2.1.1</span> Iterator ( )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-the-iterator-constructor" title="Properties of the Iterator Constructor"><span class="secnum">5.1.2.2</span> Properties of the Iterator Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-iterator.prototype" title="Iterator.prototype"><span class="secnum">5.1.2.2.1</span> Iterator.prototype</a></li><li><span class="item-toggle">◢</span><a href="#sec-iterator.from" title="Iterator.from ( O )"><span class="secnum">5.1.2.2.2</span> Iterator.from ( <var>O</var> )</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-wrapforvaliditeratorprototype-object" title="The %WrapForValidIteratorPrototype% Object"><span class="secnum">5.1.2.2.2.1</span> The %WrapForValidIteratorPrototype% Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-wrapforvaliditeratorprototype.next" title="%WrapForValidIteratorPrototype%.next ( )"><span class="secnum">5.1.2.2.2.1.1</span> %WrapForValidIteratorPrototype%.next ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-wrapforvaliditeratorprototype.return" title="%WrapForValidIteratorPrototype%.return ( )"><span class="secnum">5.1.2.2.2.1.2</span> %WrapForValidIteratorPrototype%.return ( )</a></li></ol></li></ol></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-asynciterator-objects" title="AsyncIterator Objects"><span class="secnum">5.1.3</span> AsyncIterator Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-asynciterator-constructor" title="The AsyncIterator Constructor"><span class="secnum">5.1.3.1</span> The AsyncIterator Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-asynciterator" title="AsyncIterator ( )"><span class="secnum">5.1.3.1.1</span> AsyncIterator ( )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-the-asynciterator-constructor" title="Properties of the AsyncIterator Constructor"><span class="secnum">5.1.3.2</span> Properties of the AsyncIterator Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-asynciterator.prototype" title="AsyncIterator.prototype"><span class="secnum">5.1.3.2.1</span> AsyncIterator.prototype</a></li><li><span class="item-toggle">◢</span><a href="#sec-asynciterator.from" title="AsyncIterator.from ( O )"><span class="secnum">5.1.3.2.2</span> AsyncIterator.from ( <var>O</var> )</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-wrapforvalidasynciteratorprototype-object" title="The %WrapForValidAsyncIteratorPrototype% Object"><span class="secnum">5.1.3.2.2.1</span> The %WrapForValidAsyncIteratorPrototype% Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-wrapforvalidasynciteratorprototype.next" title="%WrapForValidAsyncIteratorPrototype%.next ( )"><span class="secnum">5.1.3.2.2.1.1</span> %WrapForValidAsyncIteratorPrototype%.next ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-wrapforvalidasynciteratorprototype.return" title="%WrapForValidAsyncIteratorPrototype%.return ( )"><span class="secnum">5.1.3.2.2.1.2</span> %WrapForValidAsyncIteratorPrototype%.return ( )</a></li></ol></li></ol></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-iterator-helper-objects" title="Iterator Helper Objects"><span class="secnum">5.1.4</span> Iterator Helper Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-%iteratorhelperprototype%-object" title="The %IteratorHelperPrototype% Object"><span class="secnum">5.1.4.1</span> The %IteratorHelperPrototype% Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-%iteratorhelperprototype%.next" title="%IteratorHelperPrototype%.next ( )"><span class="secnum">5.1.4.1.1</span> %IteratorHelperPrototype%.next ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-%iteratorhelperprototype%.return" title="%IteratorHelperPrototype%.return ( )"><span class="secnum">5.1.4.1.2</span> %IteratorHelperPrototype%.return ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-%iteratorhelperprototype%-@@tostringtag" title="%IteratorHelperPrototype% [ @@toStringTag ]"><span class="secnum">5.1.4.1.3</span> %IteratorHelperPrototype% [ @@toStringTag ]</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-async-iterator-helper-objects" title="Async Iterator Helper Objects"><span class="secnum">5.1.5</span> Async Iterator Helper Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-%asynciteratorhelperprototype%-object" title="The %AsyncIteratorHelperPrototype% Object"><span class="secnum">5.1.5.1</span> The %AsyncIteratorHelperPrototype% Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-%asynciteratorhelperprototype%.next" title="%AsyncIteratorHelperPrototype%.next ( )"><span class="secnum">5.1.5.1.1</span> %AsyncIteratorHelperPrototype%.next ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-%asynciteratorhelperprototype%.return" title="%AsyncIteratorHelperPrototype%.return ( )"><span class="secnum">5.1.5.1.2</span> %AsyncIteratorHelperPrototype%.return ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-%asynciteratorhelperprototype%-@@tostringtag" title="%AsyncIteratorHelperPrototype% [ @@toStringTag ]"><span class="secnum">5.1.5.1.3</span> %AsyncIteratorHelperPrototype% [ @@toStringTag ]</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-iteratorprototype" title="Iterator.prototype"><span class="secnum">5.1.6</span> Iterator.prototype</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.constructor" title="Iterator.prototype.constructor"><span class="secnum">5.1.6.1</span> Iterator.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.map" title="Iterator.prototype.map ( mapper )"><span class="secnum">5.1.6.2</span> Iterator.prototype.map ( <var>mapper</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.filter" title="Iterator.prototype.filter ( filterer )"><span class="secnum">5.1.6.3</span> Iterator.prototype.filter ( <var>filterer</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.take" title="Iterator.prototype.take ( limit )"><span class="secnum">5.1.6.4</span> Iterator.prototype.take ( <var>limit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.drop" title="Iterator.prototype.drop ( limit )"><span class="secnum">5.1.6.5</span> Iterator.prototype.drop ( <var>limit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.indexed" title="Iterator.prototype.indexed ( )"><span class="secnum">5.1.6.6</span> Iterator.prototype.indexed ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.flatmap" title="Iterator.prototype.flatMap ( mapper )"><span class="secnum">5.1.6.7</span> Iterator.prototype.flatMap ( <var>mapper</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.reduce" title="Iterator.prototype.reduce ( reducer [ , initialValue ] )"><span class="secnum">5.1.6.8</span> Iterator.prototype.reduce ( <var>reducer</var> [ , <var>initialValue</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.toarray" title="Iterator.prototype.toArray ( )"><span class="secnum">5.1.6.9</span> Iterator.prototype.toArray ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.toasync" title="Iterator.prototype.toAsync ( )"><span class="secnum">5.1.6.10</span> Iterator.prototype.toAsync ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.foreach" title="Iterator.prototype.forEach ( fn )"><span class="secnum">5.1.6.11</span> Iterator.prototype.forEach ( <var>fn</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.some" title="Iterator.prototype.some ( fn )"><span class="secnum">5.1.6.12</span> Iterator.prototype.some ( <var>fn</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.every" title="Iterator.prototype.every ( fn )"><span class="secnum">5.1.6.13</span> Iterator.prototype.every ( <var>fn</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype.find" title="Iterator.prototype.find ( fn )"><span class="secnum">5.1.6.14</span> Iterator.prototype.find ( <var>fn</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-iteratorprototype-@@tostringtag" title="Iterator.prototype [ @@toStringTag ]"><span class="secnum">5.1.6.15</span> Iterator.prototype [ @@toStringTag ]</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-asynciteratorprototype" title="AsyncIterator.prototype"><span class="secnum">5.1.7</span> AsyncIterator.prototype</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype.constructor" title="AsyncIterator.prototype.constructor"><span class="secnum">5.1.7.1</span> AsyncIterator.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype.map" title="AsyncIterator.prototype.map ( mapper )"><span class="secnum">5.1.7.2</span> AsyncIterator.prototype.map ( <var>mapper</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype.filter" title="AsyncIterator.prototype.filter ( filterer )"><span class="secnum">5.1.7.3</span> AsyncIterator.prototype.filter ( <var>filterer</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype.take" title="AsyncIterator.prototype.take ( limit )"><span class="secnum">5.1.7.4</span> AsyncIterator.prototype.take ( <var>limit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype.drop" title="AsyncIterator.prototype.drop ( limit )"><span class="secnum">5.1.7.5</span> AsyncIterator.prototype.drop ( <var>limit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype.indexed" title="AsyncIterator.prototype.indexed ( )"><span class="secnum">5.1.7.6</span> AsyncIterator.prototype.indexed ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype.flatmap" title="AsyncIterator.prototype.flatMap ( mapper )"><span class="secnum">5.1.7.7</span> AsyncIterator.prototype.flatMap ( <var>mapper</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype.reduce" title="AsyncIterator.prototype.reduce ( reducer [ , initialValue ] )"><span class="secnum">5.1.7.8</span> AsyncIterator.prototype.reduce ( <var>reducer</var> [ , <var>initialValue</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype.toarray" title="AsyncIterator.prototype.toArray ( )"><span class="secnum">5.1.7.9</span> AsyncIterator.prototype.toArray ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype.foreach" title="AsyncIterator.prototype.forEach ( fn )"><span class="secnum">5.1.7.10</span> AsyncIterator.prototype.forEach ( <var>fn</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype.some" title="AsyncIterator.prototype.some ( fn )"><span class="secnum">5.1.7.11</span> AsyncIterator.prototype.some ( <var>fn</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype.every" title="AsyncIterator.prototype.every ( fn )"><span class="secnum">5.1.7.12</span> AsyncIterator.prototype.every ( <var>fn</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype.find" title="AsyncIterator.prototype.find ( fn )"><span class="secnum">5.1.7.13</span> AsyncIterator.prototype.find ( <var>fn</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asynciteratorprototype-@@tostringtag" title="AsyncIterator.prototype [ @@toStringTag ]"><span class="secnum">5.1.7.14</span> AsyncIterator.prototype [ @@toStringTag ]</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-async-function-objects" title="AsyncFunction Objects"><span class="secnum">5.2</span> AsyncFunction Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-async-functions-abstract-operations" title="Async Functions Abstract Operations"><span class="secnum">5.2.1</span> Async Functions Abstract Operations</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-async-functions-abstract-operations-async-function-start" title="AsyncFunctionStart ( promiseCapability, asyncFunctionBody )"><span class="secnum">5.2.1.1</span> AsyncFunctionStart ( <var>promiseCapability</var>, <var>asyncFunctionBody</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncblockstart" title="AsyncBlockStart ( promiseCapability, asyncBody, asyncContext )"><span class="secnum">5.2.1.2</span> AsyncBlockStart ( <var>promiseCapability</var>, <var>asyncBody</var>, <var>asyncContext</var> )</a></li></ol></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-new-asyncgenerator-aos" title="New AsyncGenerator AOs"><span class="secnum">6</span> New AsyncGenerator AOs</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-asyncgenerator-next" title="AsyncGeneratorNext ( generator, brand, value )"><span class="secnum">6.1</span> AsyncGeneratorNext ( <var>generator</var>, <var>brand</var>, <var>value</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-asyncgenerator-return" title="AsyncGeneratorReturn ( generator, brand, value )"><span class="secnum">6.2</span> AsyncGeneratorReturn ( <var>generator</var>, <var>brand</var>, <var>value</var> )</a></li></ol></li></ol></div></div><div id="spec-container"><h1 class="version">Stage 2 Draft / September 26, 2022</h1><h1 class="title">Iterator Helpers</h1>
<style>
  ins.block {
    font-weight: bold;
    font-style: italic;
  }
  hr {
    height: 0.25em;
    background: #ccc;
    border: 0;
    margin: 2em 0;
  }
  .unicode-property-table {
    table-layout: fixed;
    width: 100%;
    font-size: 80%;
  }
  .unicode-property-table ul {
    padding-left: 0;
    list-style: none;
  }
  #metadata-block {
    margin: 4em 0;
    padding: 10px;
    border: 1px solid #ee8421;
  }
  #metadata-block h1 {
    font-size: 1.5em;
    margin-top: 0;
  }
  #metadata-block > ul {
    list-style-type: none;
    margin: 0; padding: 0;
  }
</style>

<div id="metadata-block">
  <h1>Contributing to this Proposal</h1>
  <p>This proposal is developed on GitHub with the help of the ECMAScript community. There are a number of ways to contribute to the development of this specification:</p>
  <ul>
    <li>GitHub Repository: <a href="https://github.com/tc39/proposal-iterator-helpers">https://github.com/tc39/proposal-iterator-helpers</a></li>
    <li>Issues: <a href="https://github.com/tc39/proposal-iterator-helpers/issues">All Issues</a>, <a href="https://github.com/tc39/proposal-iterator-helpers/issues/new">File a New Issue</a></li>
    <li>Pull Requests: <a href="https://github.com/tc39/proposal-iterator-helpers/pulls">All Pull Requests</a>, <a href="https://github.com/tc39/proposal-iterator-helpers/pulls/new">Create a New Pull Request</a></li>
    <!-- <li>Test Suite: <a href="https://github.com/tc39/test262">Test262</a></li> -->
    <li>
      <p>Community:</p>
      <ul>
        <li>Discourse: <a href="https://es.discourse.group">https://es.discourse.group</a></li>
        <li>Chat: <a href="https://github.com/tc39/how-we-work/blob/HEAD/matrix-guide.md">Matrix</a></li>
      </ul>
    </li>
  </ul>
</div>

<emu-clause id="sec-well-known-intrinsic-objects">
  <h1><span class="secnum">1</span> Well-Known Intrinsic Objects</h1>

  <emu-table id="table-7" caption="Well-Known Intrinsic Objects"><figure><figcaption>Table 1: Well-Known Intrinsic Objects</figcaption>
    <table>
      <tbody><tr>
        <th>
          Intrinsic Name
        </th>
        <th>
          Global Name
        </th>
        <th>
          ECMAScript Language Association
        </th>
      </tr>
      <tr>
        <td>
          <ins><emu-xref href="#sec-asynciterator-constructor" id="_ref_5"><a href="#sec-asynciterator-constructor">%AsyncIterator%</a></emu-xref></ins>
        </td>
        <td>
          <ins><code>AsyncIterator</code></ins>
        </td>
        <td>
          <ins>The <code>AsyncIterator</code> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-asynciterator-constructor" id="_ref_0"><a href="#sec-asynciterator-constructor">5.1.3.1</a></emu-xref>)</ins>
        </td>
      </tr>
      <tr>
        <td>
          <emu-xref href="#sec-asynciteratorprototype" id="_ref_6"><a href="#sec-asynciteratorprototype">%AsyncIteratorPrototype%</a></emu-xref>
        </td>
        <td>
          <ins><code>AsyncIterator.prototype</code></ins>
        </td>
        <td>
          An object that all standard built-in async iterator objects indirectly inherit from
          <p><ins>The initial value of the <emu-val>"prototype"</emu-val> <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">data property</a></emu-xref> of <emu-xref href="#sec-asynciterator-constructor" id="_ref_7"><a href="#sec-asynciterator-constructor">%AsyncIterator%</a></emu-xref>; i.e., <emu-xref href="#sec-asynciteratorprototype" id="_ref_8"><a href="#sec-asynciteratorprototype">%AsyncIterator.prototype%</a></emu-xref></ins></p>
        </td>
      </tr>
      <tr>
        <td>
          <ins><emu-xref href="#sec-iterator-constructor" id="_ref_9"><a href="#sec-iterator-constructor">%Iterator%</a></emu-xref></ins>
        </td>
        <td>
          <ins><code>Iterator</code></ins>
        </td>
        <td>
          <ins>The <code>Iterator</code> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-iterator-constructor" id="_ref_1"><a href="#sec-iterator-constructor">5.1.2.1</a></emu-xref>)</ins>
        </td>
      </tr>
      <tr>
        <td>
          <emu-xref href="#sec-%iteratorprototype%-object"><a href="https://tc39.es/ecma262/#sec-%iteratorprototype%-object">%IteratorPrototype%</a></emu-xref>
        </td>
        <td>
          <ins><code>Iterator.prototype</code></ins>
        </td>
        <td>
          An object that all standard built-in iterator objects indirectly inherit from
          <p><ins>The initial value of the <emu-val>"prototype"</emu-val> <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">data property</a></emu-xref> of <emu-xref href="#sec-iterator-constructor" id="_ref_10"><a href="#sec-iterator-constructor">%Iterator%</a></emu-xref>; i.e., <emu-xref href="#sec-iteratorprototype" id="_ref_11"><a href="#sec-iteratorprototype">%Iterator.prototype%</a></emu-xref></ins></p>
        </td>
      </tr>
    </tbody></table>
  </figure></emu-table>
</emu-clause>

<emu-clause id="sec-built-in-function-objects">
  <h1><span class="secnum">2</span> Built-in Function Objects</h1>

  <p>
    <del>If a built-in <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function object</a></emu-xref> is not implemented as an ECMAScript function it must provide [[Call]] and [[Construct]] internal methods that conform to the following definitions:</del>
    <ins>Unless otherwise specified, a built-in <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function object</a></emu-xref> must provide [[Call]] and [[Construct]] internal methods that conform to the following definitions:</ins>
  </p>

  <emu-clause id="sec-createbuiltinfunction" type="abstract operation" aoid="CreateBuiltinFunction">
    <h1><span class="secnum">2.1</span> CreateBuiltinFunction ( <var>behaviour</var>, <var>length</var>, <var>name</var>, <var>additionalInternalSlotsList</var> [ , <var>realm</var> [ , <var>prototype</var> [ , <var>prefix</var> ] ] ] )</h1>
    <p>The abstract operation CreateBuiltinFunction takes arguments <var>behaviour</var> (an <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref>, a set of algorithm steps, or some other definition of a function's behaviour provided in this specification), <var>length</var> (a non-negative <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> or +∞), <var>name</var> (a <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">property key</a></emu-xref> or a <emu-xref href="#sec-private-names"><a href="https://tc39.es/ecma262/#sec-private-names">Private Name</a></emu-xref>), and <var>additionalInternalSlotsList</var> (a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of names of internal slots) and optional arguments <var>realm</var> (a <emu-xref href="#realm-record"><a href="https://tc39.es/ecma262/#realm-record">Realm Record</a></emu-xref>), <var>prototype</var> (an Object or <emu-val>null</emu-val>), and <var>prefix</var> (a String) and returns a <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function object</a></emu-xref>. <var>additionalInternalSlotsList</var> contains the names of additional internal slots that must be defined as part of the object. This operation creates a built-in <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function object</a></emu-xref>. It performs the following steps when called:</p>
    <emu-alg><ol><li>If <var>realm</var> is not present, set <var>realm</var> to <emu-xref href="#current-realm"><a href="https://tc39.es/ecma262/#current-realm">the current Realm Record</a></emu-xref>.</li><li>If <var>prototype</var> is not present, set <var>prototype</var> to <var>realm</var>.[[Intrinsics]].[[<emu-xref href="#sec-properties-of-the-function-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>]].</li><li>Let <var>internalSlotsList</var> be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> containing the names of all the internal slots that <emu-xref href="#sec-built-in-function-objects" id="_ref_2"><a href="#sec-built-in-function-objects">2</a></emu-xref> requires for the built-in <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function object</a></emu-xref> that is about to be created.</li><li>Append to <var>internalSlotsList</var> the elements of <var>additionalInternalSlotsList</var>.</li><li><ins>If <var>behaviour</var> is described as async, then</ins><ol><li><ins>Let <var>func</var> be a new <emu-xref href="#sec-built-in-async-function-objects" id="_ref_12"><a href="#sec-built-in-async-function-objects">built-in async function object</a></emu-xref> that, when called, performs the action described by <var>behaviour</var> using the provided arguments as the values of the corresponding parameters specified by <var>behaviour</var>. The new <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function object</a></emu-xref> has internal slots whose names are the elements of <var>internalSlotsList</var>, and an [[InitialName]] internal slot.</ins></li></ol></li><li><ins>Else,</ins><ol><li>Let <var>func</var> be a new built-in <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function object</a></emu-xref> that, when called, performs the action described by <var>behaviour</var> using the provided arguments as the values of the corresponding parameters specified by <var>behaviour</var>. The new <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function object</a></emu-xref> has internal slots whose names are the elements of <var>internalSlotsList</var>, and an [[InitialName]] internal slot.</li></ol></li><li>Set <var>func</var>.[[Prototype]] to <var>prototype</var>.</li><li>Set <var>func</var>.[[Extensible]] to <emu-val>true</emu-val>.</li><li>Set <var>func</var>.[[Realm]] to <var>realm</var>.</li><li>Set <var>func</var>.[[InitialName]] to <emu-val>null</emu-val>.</li><li>Perform <emu-xref aoid="SetFunctionLength"><a href="https://tc39.es/ecma262/#sec-setfunctionlength">SetFunctionLength</a></emu-xref>(<var>func</var>, <var>length</var>).</li><li>If <var>prefix</var> is not present, then<ol><li>Perform <emu-xref aoid="SetFunctionName"><a href="https://tc39.es/ecma262/#sec-setfunctionname">SetFunctionName</a></emu-xref>(<var>func</var>, <var>name</var>).</li></ol></li><li>Else,<ol><li>Perform <emu-xref aoid="SetFunctionName"><a href="https://tc39.es/ecma262/#sec-setfunctionname">SetFunctionName</a></emu-xref>(<var>func</var>, <var>name</var>, <var>prefix</var>).</li></ol></li><li>Return <var>func</var>.</li></ol></emu-alg>
    <p>Each built-in function defined in this specification is created by calling the CreateBuiltinFunction abstract operation.</p>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-built-in-async-function-objects">
  <h1><span class="secnum">3</span> Built-in Async Function Objects</h1>
  <p><dfn variants="built-in async function object,built-in async function objects">Built-in async function objects</dfn> are built-in <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function objects</a></emu-xref> that provide alternative [[Call]] and [[Construct]] internal methods that conform to the following definitions:</p>

  <emu-clause id="sec-built-in-function-objects-call-thisargument-argumentslist" type="internal method">
    <h1><span class="secnum">3.1</span> [[Call]] ( <var>thisArgument</var>, <var>argumentsList</var> )</h1>
    <p>The [[Call]] internal method of a <emu-xref href="#sec-built-in-async-function-objects" id="_ref_13"><a href="#sec-built-in-async-function-objects">built-in async function object</a></emu-xref> <var>F</var> takes arguments <var>thisArgument</var> (an <emu-xref href="#sec-ecmascript-language-types"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>) and <var>argumentsList</var> (a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-ecmascript-language-types"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types">ECMAScript language values</a></emu-xref>) and returns a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">normal completion containing</a></emu-xref> an <emu-xref href="#sec-ecmascript-language-types"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>. It performs the following steps when called:</p>
    <emu-alg><ol><li>Let <var>callerContext</var> be the <emu-xref href="#running-execution-context"><a href="https://tc39.es/ecma262/#running-execution-context">running execution context</a></emu-xref>.</li><li>If <var>callerContext</var> is not already suspended, suspend <var>callerContext</var>.</li><li>Let <var>calleeContext</var> be a new <emu-xref href="#sec-execution-contexts"><a href="https://tc39.es/ecma262/#sec-execution-contexts">execution context</a></emu-xref>.</li><li>Set the Function of <var>calleeContext</var> to <var>F</var>.</li><li>Let <var>calleeRealm</var> be <var>F</var>.[[Realm]].</li><li>Set the <emu-xref href="#realm"><a href="https://tc39.es/ecma262/#realm">Realm</a></emu-xref> of <var>calleeContext</var> to <var>calleeRealm</var>.</li><li>Set the ScriptOrModule of <var>calleeContext</var> to <emu-val>null</emu-val>.</li><li>Perform any necessary <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> initialization of <var>calleeContext</var>.</li><li>Push <var>calleeContext</var> onto the <emu-xref href="#execution-context-stack"><a href="https://tc39.es/ecma262/#execution-context-stack">execution context stack</a></emu-xref>; <var>calleeContext</var> is now the <emu-xref href="#running-execution-context"><a href="https://tc39.es/ecma262/#running-execution-context">running execution context</a></emu-xref>.</li><li>Let <var>promiseCapability</var> be !&nbsp;<emu-xref aoid="NewPromiseCapability"><a href="https://tc39.es/ecma262/#sec-newpromisecapability">NewPromiseCapability</a></emu-xref>(<emu-xref href="#sec-promise-constructor"><a href="https://tc39.es/ecma262/#sec-promise-constructor">%Promise%</a></emu-xref>).</li><li>Let <var>resultsClosure</var> be a new <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> that captures <var>F</var>, <var>thisArgument</var>, and <var>argumentsList</var> and performs the following steps when called:<ol><li>Return the result of evaluating <var>F</var> in a manner that conforms to the specification of <var>F</var>. <var>thisArgument</var> is the <emu-val>this</emu-val> value, <var>argumentsList</var> provides the named parameters, and the NewTarget value is <emu-val>undefined</emu-val>.</li></ol></li><li>Perform <emu-xref aoid="AsyncFunctionStart" id="_ref_14"><a href="#sec-async-functions-abstract-operations-async-function-start">AsyncFunctionStart</a></emu-xref>(<var>promiseCapability</var>, <var>resultsClosure</var>).</li><li>Remove <var>calleeContext</var> from the <emu-xref href="#execution-context-stack"><a href="https://tc39.es/ecma262/#execution-context-stack">execution context stack</a></emu-xref> and restore <var>callerContext</var> as the <emu-xref href="#running-execution-context"><a href="https://tc39.es/ecma262/#running-execution-context">running execution context</a></emu-xref>.</li><li>Return <var>promiseCapability</var>.</li></ol></emu-alg>
  </emu-clause>

  <emu-clause id="sec-built-in-function-objects-construct-argumentslist-newtarget" type="internal method">
    <h1><span class="secnum">3.2</span> [[Construct]] ( <var>argumentsList</var>, <var>newTarget</var> )</h1>
    <p>The [[Construct]] internal method of a <emu-xref href="#sec-built-in-async-function-objects" id="_ref_15"><a href="#sec-built-in-async-function-objects">built-in async function object</a></emu-xref> <var>F</var> takes arguments <var>argumentsList</var> (a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-ecmascript-language-types"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types">ECMAScript language values</a></emu-xref>) and <var>newTarget</var> (a <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>) and returns either a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">normal completion containing</a></emu-xref> an Object or a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">throw completion</a></emu-xref>. It performs the following steps when called:</p>
    <emu-alg><ol><li>Throw a <emu-val>TypeError</emu-val> exception.</li></ol></emu-alg>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-abstract-operations">
  <h1><span class="secnum">4</span> Abstract Operations</h1>

  <emu-clause id="sec-operations-on-iterator-objects">
    <h1><span class="secnum">4.1</span> Operations on Iterator Objects</h1>

    <emu-clause id="sec-getiteratordirect" type="abstract operation" aoid="GetIteratorDirect">
      <h1><span class="secnum">4.1.1</span> GetIteratorDirect ( <var>obj</var> )</h1>
      <p>The abstract operation GetIteratorDirect takes argument <var>obj</var> (an <emu-xref href="#sec-ecmascript-language-types"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>) and returns either a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">normal completion containing</a></emu-xref> an <emu-xref href="#sec-iterator-records"><a href="https://tc39.es/ecma262/#sec-iterator-records">Iterator Record</a></emu-xref> or a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">throw completion</a></emu-xref>. It performs the following steps when called:</p>
      <emu-alg><ol><li>If <var>obj</var> <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">is not an Object</a></emu-xref>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>nextMethod</var> be ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>obj</var>, <code>"next"</code>).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>nextMethod</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>iteratorRecord</var> be <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Iterator]]: <var>obj</var>, [[NextMethod]]: <var>nextMethod</var>, [[Done]]: <emu-val>false</emu-val> }.</li><li>Return <var>iteratorRecord</var>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-control-abstraction-objects">
  <h1><span class="secnum">5</span> Control Abstraction Objects</h1>

  <emu-clause id="sec-iteration">
    <h1><span class="secnum">5.1</span> Iteration</h1>

    <emu-clause id="sec-iterator-abstract-operations">
      <h1><span class="secnum">5.1.1</span> Iterator Abstract Operations</h1>

      <emu-clause id="sec-ifabruptcloseasynciterator" aoid="IfAbruptCloseAsyncIterator">
        <h1><span class="secnum">5.1.1.1</span> IfAbruptCloseAsyncIterator ( <var>value</var>, <var>iteratorRecord</var> )</h1>
        <p>IfAbruptCloseAsyncIterator is a shorthand for a sequence of algorithm steps that use an <emu-xref href="#sec-iterator-records"><a href="https://tc39.es/ecma262/#sec-iterator-records">Iterator Record</a></emu-xref>. An algorithm step of the form:</p>
        <emu-alg><ol><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_16"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>value</var>, <var>iteratorRecord</var>).</li></ol></emu-alg>
        <p>means the same thing as:</p>
        <emu-alg><ol><li>If <var>value</var> is an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then<ol><li>Perform ?&nbsp;<emu-xref aoid="AsyncIteratorClose"><a href="https://tc39.es/ecma262/#sec-asynciteratorclose">AsyncIteratorClose</a></emu-xref>(<var>iteratorRecord</var>, <var>value</var>).</li><li>Return <var>value</var>.</li></ol></li><li>Else if <var>value</var> is a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">Completion Record</a></emu-xref>, set <var>value</var> to <var>value</var>.[[Value]].</li></ol></emu-alg>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-iterator-objects">
      <h1><span class="secnum">5.1.2</span> Iterator Objects</h1>

      <emu-clause id="sec-iterator-constructor">
        <h1><span class="secnum">5.1.2.1</span> The Iterator Constructor</h1>
        <p>The <dfn>Iterator</dfn> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>:</p>
        <ul>
          <li>is <dfn>%Iterator%</dfn>.</li>
          <li>is the initial value of the <emu-val>Iterator</emu-val> property of the <emu-xref href="#sec-global-object"><a href="https://tc39.es/ecma262/#sec-global-object">global object</a></emu-xref>.</li>
          <li>is designed to be subclassable. It may be used as the value of an <emu-val>extends</emu-val> clause of a class definition.</li>
        </ul>

        <emu-clause id="sec-iterator">
          <h1><span class="secnum">5.1.2.1.1</span> Iterator ( )</h1>
          <p>When the <code>Iterator</code> function is called, the following steps are taken:</p>
          <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val> or the <emu-xref href="#active-function-object"><a href="https://tc39.es/ecma262/#active-function-object">active function object</a></emu-xref>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Return ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%Iterator.prototype%"</emu-val>).</li></ol></emu-alg>
        </emu-clause>
      </emu-clause>

      <emu-clause id="sec-properties-of-the-iterator-constructor">
        <h1><span class="secnum">5.1.2.2</span> Properties of the Iterator Constructor</h1>

        <emu-clause id="sec-iterator.prototype">
          <h1><span class="secnum">5.1.2.2.1</span> Iterator.prototype</h1>
          <p>The initial value of Iterator.prototype is <emu-xref href="#sec-iteratorprototype" id="_ref_17"><a href="#sec-iteratorprototype">%Iterator.prototype%</a></emu-xref>.</p>
          <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.</p>
        </emu-clause>

        <emu-clause id="sec-iterator.from">
          <h1><span class="secnum">5.1.2.2.2</span> Iterator.from ( <var>O</var> )</h1>
          <emu-alg><ol><li>Let <var>usingIterator</var> be ?&nbsp;<emu-xref aoid="GetMethod"><a href="https://tc39.es/ecma262/#sec-getmethod">GetMethod</a></emu-xref>(<var>O</var>, <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">@@iterator</a></emu-xref>).</li><li>If <var>usingIterator</var> is not <emu-val>undefined</emu-val>, then<ol><li>Let <var>iteratorRecord</var> be ?&nbsp;<emu-xref aoid="GetIterator"><a href="https://tc39.es/ecma262/#sec-getiterator">GetIterator</a></emu-xref>(<var>O</var>, <emu-const>sync</emu-const>, <var>usingIterator</var>).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>iteratorRecord</var>.[[NextMethod]]) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>hasInstance</var> be ?&nbsp;<emu-xref aoid="OrdinaryHasInstance"><a href="https://tc39.es/ecma262/#sec-ordinaryhasinstance">OrdinaryHasInstance</a></emu-xref>(<emu-xref href="#sec-iterator-constructor" id="_ref_18"><a href="#sec-iterator-constructor">%Iterator%</a></emu-xref>, <var>iteratorRecord</var>.[[Iterator]]).</li><li>If <var>hasInstance</var> is <emu-val>true</emu-val>, then<ol><li>Return <var>iteratorRecord</var>.[[Iterator]].</li></ol></li></ol></li><li>Else, Let <var>iteratorRecord</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_19"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<var>O</var>).</li><li>Let <var>wrapper</var> be <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-wrapforvaliditeratorprototype-object" id="_ref_20"><a href="#sec-wrapforvaliditeratorprototype-object">%WrapForValidIteratorPrototype%</a></emu-xref>, « [[Iterated]] »).</li><li>Set <var>wrapper</var>.[[Iterated]] to <var>iteratorRecord</var>.</li><li>Return <var>wrapper</var>.</li></ol></emu-alg>

          <emu-clause id="sec-wrapforvaliditeratorprototype-object">
            <h1><span class="secnum">5.1.2.2.2.1</span> The %WrapForValidIteratorPrototype% Object</h1>
            <p>The <dfn>%WrapForValidIteratorPrototype%</dfn> object:</p>
            <ul>
              <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-iteratorprototype" id="_ref_21"><a href="#sec-iteratorprototype">%Iterator.prototype%</a></emu-xref>.</li>
            </ul>

            <emu-clause id="sec-wrapforvaliditeratorprototype.next">
              <h1><span class="secnum">5.1.2.2.2.1.1</span> %WrapForValidIteratorPrototype%.next ( )</h1>
              <emu-alg><ol><li>Let <var>O</var> be <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>O</var>, [[Iterated]]).</li><li>Let <var>iteratorRecord</var> be <var>O</var>.[[Iterated]].</li><li>Return ?&nbsp;<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>iteratorRecord</var>.[[NextMethod]], <var>iteratorRecord</var>.[[Iterator]]).</li></ol></emu-alg>
            </emu-clause>

            <emu-clause id="sec-wrapforvaliditeratorprototype.return">
              <h1><span class="secnum">5.1.2.2.2.1.2</span> %WrapForValidIteratorPrototype%.return ( )</h1>
              <emu-alg><ol><li>Let <var>O</var> be <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>O</var>, [[Iterated]]).</li><li>Let <var>iterator</var> be <var>O</var>.[[Iterated]].[[Iterator]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>iterator</var> <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">is an Object</a></emu-xref>.</li><li>Let <var>returnMethod</var> be ?&nbsp;<emu-xref aoid="GetMethod"><a href="https://tc39.es/ecma262/#sec-getmethod">GetMethod</a></emu-xref>(<var>iterator</var>, <emu-val>"return"</emu-val>).</li><li>If <var>returnMethod</var> is <emu-val>undefined</emu-val>, then<ol><li>Return <emu-xref aoid="CreateIterResultObject"><a href="https://tc39.es/ecma262/#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<emu-val>undefined</emu-val>, <emu-val>true</emu-val>).</li></ol></li><li>Return ?&nbsp;<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>returnMethod</var>, <var>iterator</var>).</li></ol></emu-alg>
            </emu-clause>
          </emu-clause>
        </emu-clause>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-asynciterator-objects">
      <h1><span class="secnum">5.1.3</span> AsyncIterator Objects</h1>

      <emu-clause id="sec-asynciterator-constructor">
        <h1><span class="secnum">5.1.3.1</span> The AsyncIterator Constructor</h1>
        <p>The <dfn>AsyncIterator</dfn> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>:</p>
        <ul>
          <li>is <dfn>%AsyncIterator%</dfn>.</li>
          <li>is the initial value of the <emu-val>AsyncIterator</emu-val> property of the <emu-xref href="#sec-global-object"><a href="https://tc39.es/ecma262/#sec-global-object">global object</a></emu-xref>.</li>
          <li>is designed to be subclassable. It may be used as the value of an <emu-val>extends</emu-val> clause of a class definition.</li>
        </ul>

        <emu-clause id="sec-asynciterator">
          <h1><span class="secnum">5.1.3.1.1</span> AsyncIterator ( )</h1>
          <p>When the <code>AsyncIterator</code> function is called, the following steps are taken:</p>
          <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val> or the <emu-xref href="#active-function-object"><a href="https://tc39.es/ecma262/#active-function-object">active function object</a></emu-xref>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Return ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%AsyncIterator.prototype%"</emu-val>).</li></ol></emu-alg>
        </emu-clause>
      </emu-clause>

      <emu-clause id="sec-properties-of-the-asynciterator-constructor">
        <h1><span class="secnum">5.1.3.2</span> Properties of the AsyncIterator Constructor</h1>

        <emu-clause id="sec-asynciterator.prototype">
          <h1><span class="secnum">5.1.3.2.1</span> AsyncIterator.prototype</h1>
          <p>The initial value of AsyncIterator.prototype is <emu-xref href="#sec-asynciteratorprototype" id="_ref_22"><a href="#sec-asynciteratorprototype">%AsyncIterator.prototype%</a></emu-xref>.</p>
          <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.</p>
        </emu-clause>

        <emu-clause id="sec-asynciterator.from">
          <h1><span class="secnum">5.1.3.2.2</span> AsyncIterator.from ( <var>O</var> )</h1>
          <emu-alg><ol><li>Let <var>usingIterator</var> be ?&nbsp;<emu-xref aoid="GetMethod"><a href="https://tc39.es/ecma262/#sec-getmethod">GetMethod</a></emu-xref>(<var>O</var>, <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">@@asyncIterator</a></emu-xref>).</li><li>Let <var>iteratorRecord</var> be <emu-val>undefined</emu-val>.</li><li>If <var>usingIterator</var> is not <emu-val>undefined</emu-val>, then<ol><li>Set <var>iteratorRecord</var> to ?&nbsp;<emu-xref aoid="GetIterator"><a href="https://tc39.es/ecma262/#sec-getiterator">GetIterator</a></emu-xref>(<var>O</var>, <emu-const>async</emu-const>, <var>usingIterator</var>).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>iteratorRecord</var>.[[NextMethod]]) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>hasInstance</var> be ?&nbsp;<emu-xref aoid="OrdinaryHasInstance"><a href="https://tc39.es/ecma262/#sec-ordinaryhasinstance">OrdinaryHasInstance</a></emu-xref>(<emu-xref href="#sec-asynciterator-constructor" id="_ref_23"><a href="#sec-asynciterator-constructor">%AsyncIterator%</a></emu-xref>, <var>iteratorRecord</var>.[[Iterator]]).</li><li>If <var>hasInstance</var> is <emu-val>true</emu-val>, then<ol><li>Return <var>iteratorRecord</var>.[[Iterator]].</li></ol></li></ol></li><li>If <var>iteratorRecord</var> is <emu-val>undefined</emu-val>, then<ol><li>Set <var>usingIterator</var> to ?&nbsp;<emu-xref aoid="GetMethod"><a href="https://tc39.es/ecma262/#sec-getmethod">GetMethod</a></emu-xref>(<var>O</var>, <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">@@iterator</a></emu-xref>).</li><li>If <var>usingIterator</var> is not <emu-val>undefined</emu-val>, then<ol><li>Let <var>syncIteratorRecord</var> be ?&nbsp;<emu-xref aoid="GetIterator"><a href="https://tc39.es/ecma262/#sec-getiterator">GetIterator</a></emu-xref>(<var>O</var>, <emu-const>sync</emu-const>, <var>usingIterator</var>).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>syncIteratorRecord</var>.[[NextMethod]]) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Set <var>iteratorRecord</var> to <emu-xref aoid="CreateAsyncFromSyncIterator"><a href="https://tc39.es/ecma262/#sec-createasyncfromsynciterator">CreateAsyncFromSyncIterator</a></emu-xref>(<var>syncIteratorRecord</var>).</li></ol></li></ol></li><li>If <var>iteratorRecord</var> is <emu-val>undefined</emu-val>, set <var>iteratorRecord</var> to ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_24"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<var>O</var>).</li><li>Let <var>wrapper</var> be <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-wrapforvalidasynciteratorprototype-object" id="_ref_25"><a href="#sec-wrapforvalidasynciteratorprototype-object">%WrapForValidAsyncIteratorPrototype%</a></emu-xref>, « [[AsyncIterated]] »).</li><li>Set <var>wrapper</var>.[[AsyncIterated]] to <var>iteratorRecord</var>.</li><li>Return <var>wrapper</var>.</li></ol></emu-alg>

          <emu-clause id="sec-wrapforvalidasynciteratorprototype-object">
            <h1><span class="secnum">5.1.3.2.2.1</span> The %WrapForValidAsyncIteratorPrototype% Object</h1>
            <p>The <dfn>%WrapForValidAsyncIteratorPrototype%</dfn> object:</p>

            <ul>
              <li>is an <emu-xref href="#ordinary-object"><a href="https://tc39.es/ecma262/#ordinary-object">ordinary object</a></emu-xref>.</li>
              <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-asynciteratorprototype" id="_ref_26"><a href="#sec-asynciteratorprototype">%AsyncIterator.prototype%</a></emu-xref>.</li>
              <li>has the following properties:</li>
            </ul>

            <emu-clause id="sec-wrapforvalidasynciteratorprototype.next">
              <h1><span class="secnum">5.1.3.2.2.1.1</span> %WrapForValidAsyncIteratorPrototype%.next ( )</h1>
              <emu-alg><ol><li>Let <var>O</var> be <emu-val>this</emu-val> value.</li><li>Let <var>promiseCapability</var> be !&nbsp;<emu-xref aoid="NewPromiseCapability"><a href="https://tc39.es/ecma262/#sec-newpromisecapability">NewPromiseCapability</a></emu-xref>(<emu-xref href="#sec-promise-constructor"><a href="https://tc39.es/ecma262/#sec-promise-constructor">%Promise%</a></emu-xref>).</li><li>Let <var>check</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>O</var>, [[AsyncIterated]])).</li><li><emu-xref aoid="IfAbruptRejectPromise"><a href="https://tc39.es/ecma262/#sec-ifabruptrejectpromise">IfAbruptRejectPromise</a></emu-xref>(<var>check</var>, <var>promiseCapability</var>).</li><li>Let <var>result</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>O</var>.[[AsyncIterated]])).</li><li><emu-xref aoid="IfAbruptRejectPromise"><a href="https://tc39.es/ecma262/#sec-ifabruptrejectpromise">IfAbruptRejectPromise</a></emu-xref>(<var>result</var>, <var>promiseCapability</var>).</li><li>Return ?&nbsp;<emu-xref aoid="PromiseResolve"><a href="https://tc39.es/ecma262/#sec-promise-resolve">PromiseResolve</a></emu-xref>(<emu-xref href="#sec-promise-constructor"><a href="https://tc39.es/ecma262/#sec-promise-constructor">%Promise%</a></emu-xref>, <var>result</var>).</li></ol></emu-alg>
            </emu-clause>

            <emu-clause id="sec-wrapforvalidasynciteratorprototype.return">
              <h1><span class="secnum">5.1.3.2.2.1.2</span> %WrapForValidAsyncIteratorPrototype%.return ( )</h1>
              <emu-alg><ol><li>Let <var>O</var> be <emu-val>this</emu-val> value.</li><li>Let <var>promiseCapability</var> be !&nbsp;<emu-xref aoid="NewPromiseCapability"><a href="https://tc39.es/ecma262/#sec-newpromisecapability">NewPromiseCapability</a></emu-xref>(<emu-xref href="#sec-promise-constructor"><a href="https://tc39.es/ecma262/#sec-promise-constructor">%Promise%</a></emu-xref>).</li><li>Let <var>check</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>O</var>, [[AsyncIterated]])).</li><li><emu-xref aoid="IfAbruptRejectPromise"><a href="https://tc39.es/ecma262/#sec-ifabruptrejectpromise">IfAbruptRejectPromise</a></emu-xref>(<var>check</var>, <var>promiseCapability</var>).</li><li>Let <var>iterator</var> be <var>O</var>.[[AsyncIterated]].[[Iterator]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>iterator</var> <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">is an Object</a></emu-xref>.</li><li>Let <var>returnMethod</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="GetMethod"><a href="https://tc39.es/ecma262/#sec-getmethod">GetMethod</a></emu-xref>(<var>iterator</var>, <emu-val>"return"</emu-val>)).</li><li><emu-xref aoid="IfAbruptRejectPromise"><a href="https://tc39.es/ecma262/#sec-ifabruptrejectpromise">IfAbruptRejectPromise</a></emu-xref>(<var>returnMethod</var>, <var>promiseCapability</var>).</li><li>If <var>returnMethod</var> is <emu-val>undefined</emu-val>, then<ol><li>Return !&nbsp;<emu-xref aoid="PromiseResolve"><a href="https://tc39.es/ecma262/#sec-promise-resolve">PromiseResolve</a></emu-xref>(<emu-xref href="#sec-promise-constructor"><a href="https://tc39.es/ecma262/#sec-promise-constructor">%Promise%</a></emu-xref>, <emu-xref aoid="CreateIterResultObject"><a href="https://tc39.es/ecma262/#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<emu-val>undefined</emu-val>, <emu-val>true</emu-val>)).</li></ol></li><li>Let <var>result</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>returnMethod</var>, <var>iterator</var>)).</li><li><emu-xref aoid="IfAbruptRejectPromise"><a href="https://tc39.es/ecma262/#sec-ifabruptrejectpromise">IfAbruptRejectPromise</a></emu-xref>(<var>result</var>, <var>promiseCapability</var>).</li><li>Return ?&nbsp;<emu-xref aoid="PromiseResolve"><a href="https://tc39.es/ecma262/#sec-promise-resolve">PromiseResolve</a></emu-xref>(<emu-xref href="#sec-promise-constructor"><a href="https://tc39.es/ecma262/#sec-promise-constructor">%Promise%</a></emu-xref>, <var>result</var>).</li></ol></emu-alg>
            </emu-clause>
          </emu-clause>
        </emu-clause>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-iterator-helper-objects">
      <h1><span class="secnum">5.1.4</span> Iterator Helper Objects</h1>
      <p>An <emu-xref href="#sec-iterator-constructor" id="_ref_27"><a href="#sec-iterator-constructor">Iterator</a></emu-xref> Helper object is an <emu-xref href="#ordinary-object"><a href="https://tc39.es/ecma262/#ordinary-object">ordinary object</a></emu-xref> that represents a lazy transformation of some specific source iterator object. There is not a named <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> for <emu-xref href="#sec-iterator-constructor" id="_ref_28"><a href="#sec-iterator-constructor">Iterator</a></emu-xref> Helper objects. Instead, <emu-xref href="#sec-iterator-constructor" id="_ref_29"><a href="#sec-iterator-constructor">Iterator</a></emu-xref> Helper objects are created by calling certain methods of <emu-xref href="#sec-iterator-constructor" id="_ref_30"><a href="#sec-iterator-constructor">Iterator</a></emu-xref> instance objects.</p>

      <emu-clause id="sec-%iteratorhelperprototype%-object">
        <h1><span class="secnum">5.1.4.1</span> The %IteratorHelperPrototype% Object</h1>
        <p>The <dfn>%IteratorHelperPrototype%</dfn> object:</p>
        <ul>
          <li>has properties that are inherited by all <emu-xref href="#sec-iterator-constructor" id="_ref_31"><a href="#sec-iterator-constructor">Iterator</a></emu-xref> Helper Objects.</li>
          <li>is an <emu-xref href="#ordinary-object"><a href="https://tc39.es/ecma262/#ordinary-object">ordinary object</a></emu-xref>.</li>
          <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-iteratorprototype" id="_ref_32"><a href="#sec-iteratorprototype">%Iterator.prototype%</a></emu-xref>.</li>
          <li>has the following properties:</li>
        </ul>

        <emu-clause id="sec-%iteratorhelperprototype%.next">
          <h1><span class="secnum">5.1.4.1.1</span> %IteratorHelperPrototype%.next ( )</h1>
          <emu-alg><ol><li>Return ?&nbsp;<emu-xref aoid="GeneratorResume"><a href="https://tc39.es/ecma262/#sec-generatorresume">GeneratorResume</a></emu-xref>(<emu-val>this</emu-val> value, <emu-val>undefined</emu-val>, <emu-val>"Iterator Helper"</emu-val>).</li></ol></emu-alg>
        </emu-clause>

        <emu-clause id="sec-%iteratorhelperprototype%.return">
          <h1><span class="secnum">5.1.4.1.2</span> %IteratorHelperPrototype%.return ( )</h1>
          <emu-alg><ol><li>Let <var>C</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref> { [[Type]]: <emu-const>return</emu-const>, [[Value]]: <emu-val>undefined</emu-val>, [[Target]]: <emu-const>empty</emu-const> }.</li><li>Return ?&nbsp;<emu-xref aoid="GeneratorResumeAbrupt"><a href="https://tc39.es/ecma262/#sec-generatorresumeabrupt">GeneratorResumeAbrupt</a></emu-xref>(<emu-val>this</emu-val> value, <var>C</var>, <emu-val>"Iterator Helper"</emu-val>).</li></ol></emu-alg>
        </emu-clause>

        <emu-clause id="sec-%iteratorhelperprototype%-@@tostringtag">
          <h1><span class="secnum">5.1.4.1.3</span> %IteratorHelperPrototype% [ @@toStringTag ]</h1>
          <p>The initial value of the <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">@@toStringTag</a></emu-xref> property is the String value <emu-val>"Iterator Helper"</emu-val>.</p>
          <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
        </emu-clause>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-async-iterator-helper-objects">
      <h1><span class="secnum">5.1.5</span> Async Iterator Helper Objects</h1>
      <p>An Async <emu-xref href="#sec-iterator-constructor" id="_ref_33"><a href="#sec-iterator-constructor">Iterator</a></emu-xref> Helper object is an <emu-xref href="#ordinary-object"><a href="https://tc39.es/ecma262/#ordinary-object">ordinary object</a></emu-xref> that represents a lazy transformation of some specific source async iterator object. There is not a named <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> for Async <emu-xref href="#sec-iterator-constructor" id="_ref_34"><a href="#sec-iterator-constructor">Iterator</a></emu-xref> Helper objects. Instead, Async <emu-xref href="#sec-iterator-constructor" id="_ref_35"><a href="#sec-iterator-constructor">Iterator</a></emu-xref> Helper objects are created by calling certain methods of <emu-xref href="#sec-asynciterator-constructor" id="_ref_36"><a href="#sec-asynciterator-constructor">AsyncIterator</a></emu-xref> instance objects.</p>

      <emu-clause id="sec-%asynciteratorhelperprototype%-object">
        <h1><span class="secnum">5.1.5.1</span> The %AsyncIteratorHelperPrototype% Object</h1>
        <p>The <dfn>%AsyncIteratorHelperPrototype%</dfn> object:</p>
        <ul>
          <li>has properties that are inherited by all Async <emu-xref href="#sec-iterator-constructor" id="_ref_37"><a href="#sec-iterator-constructor">Iterator</a></emu-xref> Helper Objects.</li>
          <li>is an <emu-xref href="#ordinary-object"><a href="https://tc39.es/ecma262/#ordinary-object">ordinary object</a></emu-xref>.</li>
          <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-asynciteratorprototype" id="_ref_38"><a href="#sec-asynciteratorprototype">%AsyncIterator.prototype%</a></emu-xref>.</li>
          <li>has the following properties:</li>
        </ul>

        <emu-clause id="sec-%asynciteratorhelperprototype%.next">
          <h1><span class="secnum">5.1.5.1.1</span> %AsyncIteratorHelperPrototype%.next ( )</h1>
          <emu-alg><ol><li>Return <emu-xref aoid="AsyncGeneratorNext" id="_ref_39"><a href="#sec-asyncgenerator-next">AsyncGeneratorNext</a></emu-xref>(<emu-val>this</emu-val> value, <emu-val>"Async Iterator Helper"</emu-val>, <emu-val>undefined</emu-val>).</li></ol></emu-alg>
        </emu-clause>

        <emu-clause id="sec-%asynciteratorhelperprototype%.return">
          <h1><span class="secnum">5.1.5.1.2</span> %AsyncIteratorHelperPrototype%.return ( )</h1>
          <emu-alg><ol><li>Return <emu-xref aoid="AsyncGeneratorReturn" id="_ref_40"><a href="#sec-asyncgenerator-return">AsyncGeneratorReturn</a></emu-xref>(<emu-val>this</emu-val> value, <emu-val>"Async Iterator Helper"</emu-val>, <emu-val>undefined</emu-val>).</li></ol></emu-alg>
        </emu-clause>

        <emu-clause id="sec-%asynciteratorhelperprototype%-@@tostringtag">
          <h1><span class="secnum">5.1.5.1.3</span> %AsyncIteratorHelperPrototype% [ @@toStringTag ]</h1>
          <p>The initial value of the <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">@@toStringTag</a></emu-xref> property is the String value <emu-val>"Async Iterator Helper"</emu-val>.</p>
          <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
        </emu-clause>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-iteratorprototype">
      <h1><span class="secnum">5.1.6</span> Iterator.prototype</h1>
      <p>The <dfn>Iterator prototype object</dfn>:</p>
      <ul>
        <li>is <dfn>%Iterator.prototype%</dfn>.</li>
        <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>.</li>
        <li>is an <emu-xref href="#ordinary-object"><a href="https://tc39.es/ecma262/#ordinary-object">ordinary object</a></emu-xref>.</li>
      </ul>

      <emu-clause id="sec-iteratorprototype.constructor">
        <h1><span class="secnum">5.1.6.1</span> Iterator.prototype.constructor</h1>
        <p>The initial value of <emu-xref href="#sec-iteratorprototype" id="_ref_41"><a href="#sec-iteratorprototype">%Iterator.prototype%</a></emu-xref>.<emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> is <emu-xref href="#sec-iterator-constructor" id="_ref_42"><a href="#sec-iterator-constructor">%Iterator%</a></emu-xref>.</p>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype.map">
        <h1><span class="secnum">5.1.6.2</span> Iterator.prototype.map ( <var>mapper</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_43"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>mapper</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>iterated</var> and <var>mapper</var> and performs the following steps when called:<ol><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>mapped</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>mapper</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>mapped</var>, <var>iterated</var>).</li><li>Let <var>completion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Yield"><a href="https://tc39.es/ecma262/#sec-yield">Yield</a></emu-xref>(<var>mapped</var>)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>completion</var>, <var>iterated</var>).</li></ol></li></ol></li><li>Return <emu-xref aoid="CreateIteratorFromClosure"><a href="https://tc39.es/ecma262/#sec-createiteratorfromclosure">CreateIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"Iterator Helper"</emu-val>, <emu-xref href="#sec-%iteratorhelperprototype%-object" id="_ref_44"><a href="#sec-%iteratorhelperprototype%-object">%IteratorHelperPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype.filter">
        <h1><span class="secnum">5.1.6.3</span> Iterator.prototype.filter ( <var>filterer</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_45"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>filterer</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>iterated</var> and <var>filterer</var> and performs the following steps when called:<ol><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>selected</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>filterer</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>selected</var>, <var>iterated</var>).</li><li>If <emu-xref aoid="ToBoolean"><a href="https://tc39.es/ecma262/#sec-toboolean">ToBoolean</a></emu-xref>(<var>selected</var>) is <emu-val>true</emu-val>, then<ol><li>Let <var>completion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Yield"><a href="https://tc39.es/ecma262/#sec-yield">Yield</a></emu-xref>(<var>value</var>)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>completion</var>, <var>iterated</var>).</li></ol></li></ol></li></ol></li><li>Return <emu-xref aoid="CreateIteratorFromClosure"><a href="https://tc39.es/ecma262/#sec-createiteratorfromclosure">CreateIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"Iterator Helper"</emu-val>, <emu-xref href="#sec-%iteratorhelperprototype%-object" id="_ref_46"><a href="#sec-%iteratorhelperprototype%-object">%IteratorHelperPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype.take">
        <h1><span class="secnum">5.1.6.4</span> Iterator.prototype.take ( <var>limit</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_47"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>numLimit</var> be ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>limit</var>).</li><li>If <var>numLimit</var> is <emu-val>NaN</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>integerLimit</var> be !&nbsp;<emu-xref aoid="ToIntegerOrInfinity"><a href="https://tc39.es/ecma262/#sec-tointegerorinfinity">ToIntegerOrInfinity</a></emu-xref>(<var>numLimit</var>).</li><li>If <var>integerLimit</var> &lt; 0, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>iterated</var> and <var>integerLimit</var> and performs the following steps when called:<ol><li>Let <var>remaining</var> be <var>integerLimit</var>.</li><li>Repeat,<ol><li>If <var>remaining</var> is 0, then<ol><li>Return ?&nbsp;<emu-xref aoid="IteratorClose"><a href="https://tc39.es/ecma262/#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>iterated</var>, <emu-xref aoid="NormalCompletion"><a href="https://tc39.es/ecma262/#sec-normalcompletion">NormalCompletion</a></emu-xref>(<emu-val>undefined</emu-val>)).</li></ol></li><li>If <var>remaining</var> is not +∞, then<ol><li>Set <var>remaining</var> to <var>remaining</var> - 1.</li></ol></li><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>completion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Yield"><a href="https://tc39.es/ecma262/#sec-yield">Yield</a></emu-xref>(? <emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>))).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>completion</var>, <var>iterated</var>).</li></ol></li></ol></li><li>Return <emu-xref aoid="CreateIteratorFromClosure"><a href="https://tc39.es/ecma262/#sec-createiteratorfromclosure">CreateIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"Iterator Helper"</emu-val>, <emu-xref href="#sec-%iteratorhelperprototype%-object" id="_ref_48"><a href="#sec-%iteratorhelperprototype%-object">%IteratorHelperPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype.drop">
        <h1><span class="secnum">5.1.6.5</span> Iterator.prototype.drop ( <var>limit</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_49"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>numLimit</var> be ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>limit</var>).</li><li>If <var>numLimit</var> is <emu-val>NaN</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>integerLimit</var> be !&nbsp;<emu-xref aoid="ToIntegerOrInfinity"><a href="https://tc39.es/ecma262/#sec-tointegerorinfinity">ToIntegerOrInfinity</a></emu-xref>(<var>numLimit</var>).</li><li>If <var>integerLimit</var> &lt; 0, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>iterated</var> and <var>integerLimit</var> and performs the following steps when called:<ol><li>Let <var>remaining</var> be <var>integerLimit</var>.</li><li>Repeat, while <var>remaining</var> &gt; 0,<ol><li>If <var>remaining</var> is not +∞, then<ol><li>Set <var>remaining</var> to <var>remaining</var> - 1.</li></ol></li><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <emu-val>undefined</emu-val>.</li></ol></li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>completion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Yield"><a href="https://tc39.es/ecma262/#sec-yield">Yield</a></emu-xref>(? <emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>))).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>completion</var>, <var>iterated</var>).</li></ol></li></ol></li><li>Return <emu-xref aoid="CreateIteratorFromClosure"><a href="https://tc39.es/ecma262/#sec-createiteratorfromclosure">CreateIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"Iterator Helper"</emu-val>, <emu-xref href="#sec-%iteratorhelperprototype%-object" id="_ref_50"><a href="#sec-%iteratorhelperprototype%-object">%IteratorHelperPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype.indexed">
        <h1><span class="secnum">5.1.6.6</span> Iterator.prototype.indexed ( )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_51"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>iterated</var> and performs the following steps when called:<ol><li>Let <var>index</var> be 0.</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>pair</var> be <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(« <emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>index</var>), <var>value</var> »).</li><li>Set <var>index</var> to <var>index</var> + 1.</li><li>Let <var>completion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Yield"><a href="https://tc39.es/ecma262/#sec-yield">Yield</a></emu-xref>(<var>pair</var>)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>completion</var>, <var>iterated</var>).</li></ol></li></ol></li><li>Return <emu-xref aoid="CreateIteratorFromClosure"><a href="https://tc39.es/ecma262/#sec-createiteratorfromclosure">CreateIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"Iterator Helper"</emu-val>, <emu-xref href="#sec-%iteratorhelperprototype%-object" id="_ref_52"><a href="#sec-%iteratorhelperprototype%-object">%IteratorHelperPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype.flatmap">
        <h1><span class="secnum">5.1.6.7</span> Iterator.prototype.flatMap ( <var>mapper</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_53"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>mapper</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>iterated</var> and <var>mapper</var> and performs the following steps when called:<ol><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>mapped</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>mapper</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>mapped</var>, <var>iterated</var>).</li><li>Let <var>innerIterator</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="GetIterator"><a href="https://tc39.es/ecma262/#sec-getiterator">GetIterator</a></emu-xref>(<var>mapped</var>, <emu-const>sync</emu-const>)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>innerIterator</var>, <var>iterated</var>).</li><li>Let <var>innerAlive</var> be <emu-val>true</emu-val>.</li><li>Repeat, while <var>innerAlive</var> is <emu-val>true</emu-val>,<ol><li>Let <var>innerNext</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>innerIterator</var>)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>innerNext</var>, <var>iterated</var>).</li><li>If <var>innerNext</var> is <emu-val>false</emu-val>, then<ol><li>Set <var>innerAlive</var> to <emu-val>false</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>innerValue</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>innerNext</var>)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>innerValue</var>, <var>iterated</var>).</li><li>Let <var>completion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Yield"><a href="https://tc39.es/ecma262/#sec-yield">Yield</a></emu-xref>(<var>innerValue</var>)).</li><li>If <var>completion</var> is an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then<ol><li>Let <var>backupCompletion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="IteratorClose"><a href="https://tc39.es/ecma262/#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>innerIterator</var>, <var>completion</var>)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>backupCompletion</var>, <var>iterated</var>).</li><li>Return ?&nbsp;<emu-xref aoid="IteratorClose"><a href="https://tc39.es/ecma262/#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>completion</var>, <var>iterated</var>).</li></ol></li></ol></li></ol></li></ol></li></ol></li><li>Return <emu-xref aoid="CreateIteratorFromClosure"><a href="https://tc39.es/ecma262/#sec-createiteratorfromclosure">CreateIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"Iterator Helper"</emu-val>, <emu-xref href="#sec-%iteratorhelperprototype%-object" id="_ref_54"><a href="#sec-%iteratorhelperprototype%-object">%IteratorHelperPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype.reduce">
        <h1><span class="secnum">5.1.6.8</span> Iterator.prototype.reduce ( <var>reducer</var> [ , <var>initialValue</var> ] )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_55"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>reducer</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>initialValue</var> is not present, then<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>accumulator</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li></ol></li><li>Else,<ol><li>Let <var>accumulator</var> be <var>initialValue</var>.</li></ol></li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <var>accumulator</var>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>result</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>reducer</var>, <emu-val>undefined</emu-val>, « <var>accumulator</var>, <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>result</var>, <var>iterated</var>).</li><li>Set <var>accumulator</var> to <var>result</var>.[[Value]].</li></ol></li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype.toarray">
        <h1><span class="secnum">5.1.6.9</span> Iterator.prototype.toArray ( )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_56"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>items</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>items</var>).</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Append <var>value</var> to <var>items</var>.</li></ol></li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype.toasync">
        <h1><span class="secnum">5.1.6.10</span> Iterator.prototype.toAsync ( )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>syncIteratorRecord</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_57"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>asyncIteratorRecord</var> be <emu-xref aoid="CreateAsyncFromSyncIterator"><a href="https://tc39.es/ecma262/#sec-createasyncfromsynciterator">CreateAsyncFromSyncIterator</a></emu-xref>(<var>syncIteratorRecord</var>).</li><li>Let <var>wrapper</var> be <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-wrapforvalidasynciteratorprototype-object" id="_ref_58"><a href="#sec-wrapforvalidasynciteratorprototype-object">%WrapForValidAsyncIteratorPrototype%</a></emu-xref>, « [[AsyncIterated]] »).</li><li>Set <var>wrapper</var>.[[AsyncIterated]] to <var>asyncIteratorRecord</var>.</li><li>Return <var>wrapper</var>.</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype.foreach">
        <h1><span class="secnum">5.1.6.11</span> Iterator.prototype.forEach ( <var>fn</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_59"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>fn</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>result</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>fn</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>result</var>, <var>iterated</var>).</li></ol></li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype.some">
        <h1><span class="secnum">5.1.6.12</span> Iterator.prototype.some ( <var>fn</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_60"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>fn</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <emu-val>false</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>result</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>fn</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>result</var>, <var>iterated</var>).</li><li>If <emu-xref aoid="ToBoolean"><a href="https://tc39.es/ecma262/#sec-toboolean">ToBoolean</a></emu-xref>(<var>result</var>) is <emu-val>true</emu-val>, return ?&nbsp;<emu-xref aoid="IteratorClose"><a href="https://tc39.es/ecma262/#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>iterated</var>, <emu-xref aoid="NormalCompletion"><a href="https://tc39.es/ecma262/#sec-normalcompletion">NormalCompletion</a></emu-xref>(<emu-val>true</emu-val>)).</li></ol></li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype.every">
        <h1><span class="secnum">5.1.6.13</span> Iterator.prototype.every ( <var>fn</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_61"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>fn</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <emu-val>true</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>result</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>fn</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>result</var>, <var>iterated</var>).</li><li>If <emu-xref aoid="ToBoolean"><a href="https://tc39.es/ecma262/#sec-toboolean">ToBoolean</a></emu-xref>(<var>result</var>) is <emu-val>false</emu-val>, return ?&nbsp;<emu-xref aoid="IteratorClose"><a href="https://tc39.es/ecma262/#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>iterated</var>, <emu-xref aoid="NormalCompletion"><a href="https://tc39.es/ecma262/#sec-normalcompletion">NormalCompletion</a></emu-xref>(<emu-val>false</emu-val>)).</li></ol></li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype.find">
        <h1><span class="secnum">5.1.6.14</span> Iterator.prototype.find ( <var>fn</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_62"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>fn</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterated</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>result</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>fn</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>result</var>, <var>iterated</var>).</li><li>If <emu-xref aoid="ToBoolean"><a href="https://tc39.es/ecma262/#sec-toboolean">ToBoolean</a></emu-xref>(<var>result</var>) is <emu-val>true</emu-val>, return ?&nbsp;<emu-xref aoid="IteratorClose"><a href="https://tc39.es/ecma262/#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>iterated</var>, <emu-xref aoid="NormalCompletion"><a href="https://tc39.es/ecma262/#sec-normalcompletion">NormalCompletion</a></emu-xref>(<var>value</var>)).</li></ol></li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-iteratorprototype-@@tostringtag">
        <h1><span class="secnum">5.1.6.15</span> Iterator.prototype [ @@toStringTag ]</h1>
        <p>The initial value of the <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">@@toStringTag</a></emu-xref> property is the String value "<emu-xref href="#sec-iterator-constructor" id="_ref_63"><a href="#sec-iterator-constructor">Iterator</a></emu-xref>".</p>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>Unlike the <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">@@toStringTag</a></emu-xref> on most built-in classes, for web-compatibility reasons this property must be writable.</p>
        </div></emu-note>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-asynciteratorprototype">
      <h1><span class="secnum">5.1.7</span> AsyncIterator.prototype</h1>
      <p>The <dfn>AsyncIterator prototype object</dfn>:</p>
      <ul>
        <li>is <dfn>%AsyncIterator.prototype%</dfn>.</li>
        <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>.</li>
        <li>is an <emu-xref href="#ordinary-object"><a href="https://tc39.es/ecma262/#ordinary-object">ordinary object</a></emu-xref>.</li>
      </ul>

      <emu-clause id="sec-asynciteratorprototype.constructor">
        <h1><span class="secnum">5.1.7.1</span> AsyncIterator.prototype.constructor</h1>
        <p>The initial value of AsyncIterator.prototype.<emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> is <emu-xref href="#sec-asynciterator-constructor" id="_ref_64"><a href="#sec-asynciterator-constructor">%AsyncIterator%</a></emu-xref>.</p>
      </emu-clause>

      <emu-clause id="sec-asynciteratorprototype.map">
        <h1><span class="secnum">5.1.7.2</span> AsyncIterator.prototype.map ( <var>mapper</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_65"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>mapper</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>iterated</var> and <var>mapper</var> and performs the following steps when called:<ol><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>mapped</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>mapper</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_66"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>mapped</var>, <var>iterated</var>).</li><li>Set <var>mapped</var> to <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(<var>mapped</var>)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_67"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>mapped</var>, <var>iterated</var>).</li><li>Let <var>completion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Yield"><a href="https://tc39.es/ecma262/#sec-yield">Yield</a></emu-xref>(<var>mapped</var>)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_68"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>completion</var>, <var>iterated</var>).</li></ol></li></ol></li><li>Return <emu-xref aoid="CreateAsyncIteratorFromClosure"><a href="https://tc39.es/ecma262/#sec-createasynciteratorfromclosure">CreateAsyncIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"Async Iterator Helper"</emu-val>, <emu-xref href="#sec-%asynciteratorhelperprototype%-object" id="_ref_69"><a href="#sec-%asynciteratorhelperprototype%-object">%AsyncIteratorHelperPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-asynciteratorprototype.filter">
        <h1><span class="secnum">5.1.7.3</span> AsyncIterator.prototype.filter ( <var>filterer</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_70"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>filterer</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>iterated</var> and <var>filterer</var> and performs the following steps when called:<ol><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>selected</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>filterer</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_71"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>selected</var>, <var>iterated</var>).</li><li>Set <var>selected</var> to <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(<var>selected</var>)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_72"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>selected</var>, <var>iterated</var>).</li><li>If <emu-xref aoid="ToBoolean"><a href="https://tc39.es/ecma262/#sec-toboolean">ToBoolean</a></emu-xref>(<var>selected</var>) is <emu-val>true</emu-val>, then<ol><li>Let <var>completion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Yield"><a href="https://tc39.es/ecma262/#sec-yield">Yield</a></emu-xref>(<var>value</var>)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_73"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>completion</var>, <var>iterated</var>).</li></ol></li></ol></li></ol></li><li>Return <emu-xref aoid="CreateAsyncIteratorFromClosure"><a href="https://tc39.es/ecma262/#sec-createasynciteratorfromclosure">CreateAsyncIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"Async Iterator Helper"</emu-val>, <emu-xref href="#sec-%asynciteratorhelperprototype%-object" id="_ref_74"><a href="#sec-%asynciteratorhelperprototype%-object">%AsyncIteratorHelperPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-asynciteratorprototype.take">
        <h1><span class="secnum">5.1.7.4</span> AsyncIterator.prototype.take ( <var>limit</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_75"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>numLimit</var> be ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>limit</var>).</li><li>If <var>numLimit</var> is <emu-val>NaN</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>integerLimit</var> be !&nbsp;<emu-xref aoid="ToIntegerOrInfinity"><a href="https://tc39.es/ecma262/#sec-tointegerorinfinity">ToIntegerOrInfinity</a></emu-xref>(<var>numLimit</var>).</li><li>If <var>integerLimit</var> &lt; 0, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>iterated</var> and <var>integerLimit</var> and performs the following steps when called:<ol><li>Let <var>remaining</var> be <var>integerLimit</var>.</li><li>Repeat,<ol><li>If <var>remaining</var> is 0, then<ol><li>Return ?&nbsp;<emu-xref aoid="AsyncIteratorClose"><a href="https://tc39.es/ecma262/#sec-asynciteratorclose">AsyncIteratorClose</a></emu-xref>(<var>iterated</var>, <emu-xref aoid="NormalCompletion"><a href="https://tc39.es/ecma262/#sec-normalcompletion">NormalCompletion</a></emu-xref>(<emu-val>undefined</emu-val>)).</li></ol></li><li>If <var>remaining</var> is not +∞, then<ol><li>Set <var>remaining</var> to <var>remaining</var> - 1.</li></ol></li><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>completion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Yield"><a href="https://tc39.es/ecma262/#sec-yield">Yield</a></emu-xref>(? <emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>))).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_76"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>completion</var>, <var>iterated</var>).</li></ol></li></ol></li><li>Return <emu-xref aoid="CreateAsyncIteratorFromClosure"><a href="https://tc39.es/ecma262/#sec-createasynciteratorfromclosure">CreateAsyncIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"Async Iterator Helper"</emu-val>, <emu-xref href="#sec-%asynciteratorhelperprototype%-object" id="_ref_77"><a href="#sec-%asynciteratorhelperprototype%-object">%AsyncIteratorHelperPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-asynciteratorprototype.drop">
        <h1><span class="secnum">5.1.7.5</span> AsyncIterator.prototype.drop ( <var>limit</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_78"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>numLimit</var> be ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>limit</var>).</li><li>If <var>numLimit</var> is <emu-val>NaN</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>integerLimit</var> be !&nbsp;<emu-xref aoid="ToIntegerOrInfinity"><a href="https://tc39.es/ecma262/#sec-tointegerorinfinity">ToIntegerOrInfinity</a></emu-xref>(<var>numLimit</var>).</li><li>If <var>integerLimit</var> &lt; 0, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>iterated</var> and <var>integerLimit</var> and performs the following steps when called:<ol><li>Let <var>remaining</var> be <var>integerLimit</var>.</li><li>Repeat, while <var>remaining</var> &gt; 0,<ol><li>If <var>remaining</var> is not +∞, then<ol><li>Set <var>remaining</var> to <var>remaining</var> - 1.</li></ol></li><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li></ol></li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>completion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Yield"><a href="https://tc39.es/ecma262/#sec-yield">Yield</a></emu-xref>(? <emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>))).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_79"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>completion</var>, <var>iterated</var>).</li></ol></li></ol></li><li>Return <emu-xref aoid="CreateAsyncIteratorFromClosure"><a href="https://tc39.es/ecma262/#sec-createasynciteratorfromclosure">CreateAsyncIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"Async Iterator Helper"</emu-val>, <emu-xref href="#sec-%asynciteratorhelperprototype%-object" id="_ref_80"><a href="#sec-%asynciteratorhelperprototype%-object">%AsyncIteratorHelperPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-asynciteratorprototype.indexed">
        <h1><span class="secnum">5.1.7.6</span> AsyncIterator.prototype.indexed ( )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_81"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>iterated</var> and performs the following steps when called:<ol><li>Let <var>index</var> be 0.</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>pair</var> be <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(« <var>index</var>, <var>value</var> »).</li><li>Set <var>index</var> to <var>index</var> + 1.</li><li>Let <var>completion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Yield"><a href="https://tc39.es/ecma262/#sec-yield">Yield</a></emu-xref>(<var>pair</var>)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_82"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>completion</var>, <var>iterated</var>).</li></ol></li></ol></li><li>Return <emu-xref aoid="CreateAsyncIteratorFromClosure"><a href="https://tc39.es/ecma262/#sec-createasynciteratorfromclosure">CreateAsyncIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"Async Iterator Helper"</emu-val>, <emu-xref href="#sec-%asynciteratorhelperprototype%-object" id="_ref_83"><a href="#sec-%asynciteratorhelperprototype%-object">%AsyncIteratorHelperPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-asynciteratorprototype.flatmap">
        <h1><span class="secnum">5.1.7.7</span> AsyncIterator.prototype.flatMap ( <var>mapper</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_84"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>mapper</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>iterated</var> and <var>mapper</var> and performs the following steps when called:<ol><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>mapped</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>mapper</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_85"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>mapped</var>, <var>iterated</var>).</li><li>Set <var>mapped</var> to <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(<var>mapped</var>)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_86"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>mapped</var>, <var>iterated</var>).</li><li>Let <var>innerIterator</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="GetIterator"><a href="https://tc39.es/ecma262/#sec-getiterator">GetIterator</a></emu-xref>(<var>mapped</var>, <emu-const>async</emu-const>)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_87"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>innerIterator</var>, <var>iterated</var>).</li><li>Let <var>innerAlive</var> be <emu-val>true</emu-val>.</li><li>Repeat, while <var>innerAlive</var> is <emu-val>true</emu-val>,<ol><li>Let <var>innerNextPromise</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>innerIterator</var>)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_88"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>innerNextPromise</var>, <var>iterated</var>).</li><li>Let <var>innerNext</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(<var>innerNextPromise</var>)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_89"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>innerNext</var>, <var>iterated</var>).</li><li>Let <var>innerComplete</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>innerNext</var>)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_90"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>innerComplete</var>, <var>iterated</var>).</li><li>If <var>innerComplete</var> is <emu-val>true</emu-val>, then<ol><li>Set <var>innerAlive</var> to <emu-val>false</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>innerValue</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>innerNext</var>)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_91"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>innerValue</var>, <var>iterated</var>).</li><li id="step-async-iterator-flatmap-yield">Let <var>completion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Yield"><a href="https://tc39.es/ecma262/#sec-yield">Yield</a></emu-xref>(<var>innerValue</var>)).</li><li>If <var>completion</var> is a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">return completion</a></emu-xref>, then<ol><li>Let <var>backupCompletion</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="IteratorClose"><a href="https://tc39.es/ecma262/#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>innerIterator</var>, <var>completion</var>)).</li><li><emu-xref aoid="IfAbruptCloseIterator"><a href="https://tc39.es/ecma262/#sec-ifabruptcloseiterator">IfAbruptCloseIterator</a></emu-xref>(<var>backupCompletion</var>, <var>iterated</var>).</li><li>Return ?&nbsp;<emu-xref aoid="IteratorClose"><a href="https://tc39.es/ecma262/#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>completion</var>, <var>iterated</var>).</li></ol></li><li>Else if <var>completion</var> is a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">throw completion</a></emu-xref>, then<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: Awaiting <var>innerValue</var> during the <emu-xref aoid="Yield"><a href="https://tc39.es/ecma262/#sec-yield">Yield</a></emu-xref> on step <emu-xref href="#step-async-iterator-flatmap-yield" id="_ref_3"><a href="#step-async-iterator-flatmap-yield">3.a.xi.8.c</a></emu-xref> threw.</li><li>Return ?&nbsp;<emu-xref aoid="IteratorClose"><a href="https://tc39.es/ecma262/#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>completion</var>, <var>iterated</var>).</li></ol></li></ol></li></ol></li></ol></li></ol></li><li>Return <emu-xref aoid="CreateAsyncIteratorFromClosure"><a href="https://tc39.es/ecma262/#sec-createasynciteratorfromclosure">CreateAsyncIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"Async Iterator Helper"</emu-val>, <emu-xref href="#sec-%asynciteratorhelperprototype%-object" id="_ref_92"><a href="#sec-%asynciteratorhelperprototype%-object">%AsyncIteratorHelperPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-asynciteratorprototype.reduce">
        <h1><span class="secnum">5.1.7.8</span> AsyncIterator.prototype.reduce ( <var>reducer</var> [ , <var>initialValue</var> ] )</h1>
        <p>This async method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_93"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>reducer</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>initialValue</var> is not present, then<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>accumulator</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li></ol></li><li>Else,<ol><li>Let <var>accumulator</var> be <var>initialValue</var>.</li></ol></li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, return <var>accumulator</var>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>result</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>reducer</var>, <emu-val>undefined</emu-val>, « <var>accumulator</var>, <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_94"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>result</var>, <var>iterated</var>).</li><li>Set <var>result</var> to <emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(<var>result</var>).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_95"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>result</var>, <var>iterated</var>).</li><li>Set <var>accumulator</var> to <var>result</var>.</li></ol></li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-asynciteratorprototype.toarray">
        <h1><span class="secnum">5.1.7.9</span> AsyncIterator.prototype.toArray ( )</h1>
        <p>This async method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_96"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>items</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, return <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>items</var>).</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Append <var>value</var> to <var>items</var>.</li></ol></li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-asynciteratorprototype.foreach">
        <h1><span class="secnum">5.1.7.10</span> AsyncIterator.prototype.forEach ( <var>fn</var> )</h1>
        <p>This async method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_97"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>fn</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>r</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>fn</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_98"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>r</var>, <var>iterated</var>).</li><li>Set <var>r</var> to <emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(r).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_99"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>r</var>, <var>iterated</var>).</li></ol></li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-asynciteratorprototype.some">
        <h1><span class="secnum">5.1.7.11</span> AsyncIterator.prototype.some ( <var>fn</var> )</h1>
        <p>This async method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_100"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>fn</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, return <emu-val>false</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>result</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>fn</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_101"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>result</var>, <var>iterated</var>).</li><li>Set <var>result</var> to <emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(<var>result</var>).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_102"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>result</var>, <var>iterated</var>).</li><li>If <emu-xref aoid="ToBoolean"><a href="https://tc39.es/ecma262/#sec-toboolean">ToBoolean</a></emu-xref>(<var>result</var>) is <emu-val>true</emu-val>, return ?&nbsp;<emu-xref aoid="AsyncIteratorClose"><a href="https://tc39.es/ecma262/#sec-asynciteratorclose">AsyncIteratorClose</a></emu-xref>(<var>iterated</var>, <emu-xref aoid="NormalCompletion"><a href="https://tc39.es/ecma262/#sec-normalcompletion">NormalCompletion</a></emu-xref>(<emu-val>true</emu-val>)).</li></ol></li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-asynciteratorprototype.every">
        <h1><span class="secnum">5.1.7.12</span> AsyncIterator.prototype.every ( <var>fn</var> )</h1>
        <p>This async method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_103"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>fn</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, return <emu-val>true</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>result</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>fn</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_104"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>result</var>, <var>iterated</var>).</li><li>Set <var>result</var> to <emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(<var>result</var>).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_105"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>result</var>, <var>iterated</var>).</li><li>If <emu-xref aoid="ToBoolean"><a href="https://tc39.es/ecma262/#sec-toboolean">ToBoolean</a></emu-xref>(<var>result</var>) is <emu-val>false</emu-val>, return ?&nbsp;<emu-xref aoid="AsyncIteratorClose"><a href="https://tc39.es/ecma262/#sec-asynciteratorclose">AsyncIteratorClose</a></emu-xref>(<var>iterated</var>, <emu-xref aoid="NormalCompletion"><a href="https://tc39.es/ecma262/#sec-normalcompletion">NormalCompletion</a></emu-xref>(<emu-val>false</emu-val>)).</li></ol></li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-asynciteratorprototype.find">
        <h1><span class="secnum">5.1.7.13</span> AsyncIterator.prototype.find ( <var>fn</var> )</h1>
        <p>This async method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>iterated</var> be ?&nbsp;<emu-xref aoid="GetIteratorDirect" id="_ref_106"><a href="#sec-getiteratordirect">GetIteratorDirect</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>fn</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(? <emu-xref aoid="IteratorNext"><a href="https://tc39.es/ecma262/#sec-iteratornext">IteratorNext</a></emu-xref>(<var>iterated</var>)).</li><li>If ?&nbsp;<emu-xref aoid="IteratorComplete"><a href="https://tc39.es/ecma262/#sec-iteratorcomplete">IteratorComplete</a></emu-xref>(<var>next</var>) is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="IteratorValue"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>result</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>fn</var>, <emu-val>undefined</emu-val>, « <var>value</var> »)).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_107"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>result</var>, <var>iterated</var>).</li><li>Set <var>result</var> to <emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref>(<var>result</var>).</li><li><emu-xref aoid="IfAbruptCloseAsyncIterator" id="_ref_108"><a href="#sec-ifabruptcloseasynciterator">IfAbruptCloseAsyncIterator</a></emu-xref>(<var>result</var>, <var>iterated</var>).</li><li>If <emu-xref aoid="ToBoolean"><a href="https://tc39.es/ecma262/#sec-toboolean">ToBoolean</a></emu-xref>(<var>result</var>) is <emu-val>true</emu-val>, return ?&nbsp;<emu-xref aoid="AsyncIteratorClose"><a href="https://tc39.es/ecma262/#sec-asynciteratorclose">AsyncIteratorClose</a></emu-xref>(<var>iterated</var>, <emu-xref aoid="NormalCompletion"><a href="https://tc39.es/ecma262/#sec-normalcompletion">NormalCompletion</a></emu-xref>(<var>value</var>)).</li></ol></li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-asynciteratorprototype-@@tostringtag">
        <h1><span class="secnum">5.1.7.14</span> AsyncIterator.prototype [ @@toStringTag ]</h1>
        <p>The initial value of the <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">@@toStringTag</a></emu-xref> property is the String value "Async <emu-xref href="#sec-iterator-constructor" id="_ref_109"><a href="#sec-iterator-constructor">Iterator</a></emu-xref>".</p>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>Unlike the <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">@@toStringTag</a></emu-xref> on most built-in classes, for web-compatibility reasons this property must be writable.</p>
        </div></emu-note>
      </emu-clause>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-async-function-objects">
    <h1><span class="secnum">5.2</span> AsyncFunction Objects</h1>

    <emu-clause id="sec-async-functions-abstract-operations">
      <h1><span class="secnum">5.2.1</span> Async Functions Abstract Operations</h1>

      <emu-clause id="sec-async-functions-abstract-operations-async-function-start" type="abstract operation" aoid="AsyncFunctionStart">
        <h1><span class="secnum">5.2.1.1</span> AsyncFunctionStart ( <var>promiseCapability</var>, <var>asyncFunctionBody</var> )</h1>
        <p>The abstract operation AsyncFunctionStart takes arguments <var>promiseCapability</var> (a <emu-xref href="#sec-promisecapability-records"><a href="https://tc39.es/ecma262/#sec-promisecapability-records">PromiseCapability Record</a></emu-xref>) and <var>asyncFunctionBody</var> (a <emu-nt><a href="https://tc39.es/ecma262/#prod-FunctionBody">FunctionBody</a></emu-nt> <emu-xref href="#sec-syntactic-grammar"><a href="https://tc39.es/ecma262/#sec-syntactic-grammar">Parse Node</a></emu-xref> or an <emu-nt><a href="https://tc39.es/ecma262/#prod-ExpressionBody">ExpressionBody</a></emu-nt> <emu-xref href="#sec-syntactic-grammar"><a href="https://tc39.es/ecma262/#sec-syntactic-grammar">Parse Node</a></emu-xref> <ins>or an <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters</ins>) and returns <emu-const>unused</emu-const>. It performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>runningContext</var> be the <emu-xref href="#running-execution-context"><a href="https://tc39.es/ecma262/#running-execution-context">running execution context</a></emu-xref>.</li><li>Let <var>asyncContext</var> be a copy of <var>runningContext</var>.</li><li>NOTE: Copying the execution state is required for <emu-xref aoid="AsyncBlockStart" id="_ref_110"><a href="#sec-asyncblockstart">AsyncBlockStart</a></emu-xref> to resume its execution. It is ill-defined to resume a currently executing context.</li><li>Perform <emu-xref aoid="AsyncBlockStart" id="_ref_111"><a href="#sec-asyncblockstart">AsyncBlockStart</a></emu-xref>(<var>promiseCapability</var>, <var>asyncFunctionBody</var>, <var>asyncContext</var>).</li><li>Return <emu-const>unused</emu-const>.</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-asyncblockstart" type="abstract operation" aoid="AsyncBlockStart">
        <h1><span class="secnum">5.2.1.2</span> AsyncBlockStart ( <var>promiseCapability</var>, <var>asyncBody</var>, <var>asyncContext</var> )</h1>
        <p>The abstract operation AsyncBlockStart takes arguments <var>promiseCapability</var> (a <emu-xref href="#sec-promisecapability-records"><a href="https://tc39.es/ecma262/#sec-promisecapability-records">PromiseCapability Record</a></emu-xref>), <var>asyncBody</var> (a <emu-xref href="#sec-syntactic-grammar"><a href="https://tc39.es/ecma262/#sec-syntactic-grammar">Parse Node</a></emu-xref> <ins>or an <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters</ins>), and <var>asyncContext</var> (an <emu-xref href="#sec-execution-contexts"><a href="https://tc39.es/ecma262/#sec-execution-contexts">execution context</a></emu-xref>). It performs the following steps when called:</p>
        <emu-alg><ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>promiseCapability</var> is a <emu-xref href="#sec-promisecapability-records"><a href="https://tc39.es/ecma262/#sec-promisecapability-records">PromiseCapability Record</a></emu-xref>.</li><li>Let <var>runningContext</var> be the <emu-xref href="#running-execution-context"><a href="https://tc39.es/ecma262/#running-execution-context">running execution context</a></emu-xref>.</li><li fence-effects="user-code">Set the code evaluation state of <var>asyncContext</var> such that when evaluation is resumed for that <emu-xref href="#sec-execution-contexts"><a href="https://tc39.es/ecma262/#sec-execution-contexts">execution context</a></emu-xref> the following steps will be performed:<ol><li><ins>If <var>asyncBody</var> is a <emu-xref href="#sec-syntactic-grammar"><a href="https://tc39.es/ecma262/#sec-syntactic-grammar">Parse Node</a></emu-xref>, then</ins><ol><li><ins>Let <var>result</var> be the result of evaluating <var>asyncBody</var>.</ins></li></ol></li><li><ins>Else,</ins><ol><li><ins><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>asyncBody</var> is an <emu-xref href="#sec-abstract-closure"><a href="https://tc39.es/ecma262/#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters.</ins></li><li><ins>Let <var>result</var> be <var>asyncBody</var>().</ins></li></ol></li><li><del>Let <var>result</var> be the result of evaluating <var>asyncBody</var>.</del></li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: If we return here, the async function either threw an exception or performed an implicit or explicit return; all awaiting is done.</li><li>Remove <var>asyncContext</var> from the <emu-xref href="#execution-context-stack"><a href="https://tc39.es/ecma262/#execution-context-stack">execution context stack</a></emu-xref> and restore the <emu-xref href="#sec-execution-contexts"><a href="https://tc39.es/ecma262/#sec-execution-contexts">execution context</a></emu-xref> that is at the top of the <emu-xref href="#execution-context-stack"><a href="https://tc39.es/ecma262/#execution-context-stack">execution context stack</a></emu-xref> as the <emu-xref href="#running-execution-context"><a href="https://tc39.es/ecma262/#running-execution-context">running execution context</a></emu-xref>.</li><li>If <var>result</var>.[[Type]] is <emu-const>normal</emu-const>, then<ol><li>Perform !&nbsp;<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>promiseCapability</var>.[[Resolve]], <emu-val>undefined</emu-val>, « <emu-val>undefined</emu-val> »).</li></ol></li><li>Else if <var>result</var>.[[Type]] is <emu-const>return</emu-const>, then<ol><li>Perform !&nbsp;<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>promiseCapability</var>.[[Resolve]], <emu-val>undefined</emu-val>, « <var>result</var>.[[Value]] »).</li></ol></li><li>Else,<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>result</var>.[[Type]] is <emu-const>throw</emu-const>.</li><li>Perform !&nbsp;<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>promiseCapability</var>.[[Reject]], <emu-val>undefined</emu-val>, « <var>result</var>.[[Value]] »).</li></ol></li><li id="step-asyncblockstart-return-undefined">Return.</li></ol></li><li>Push <var>asyncContext</var> onto the <emu-xref href="#execution-context-stack"><a href="https://tc39.es/ecma262/#execution-context-stack">execution context stack</a></emu-xref>; <var>asyncContext</var> is now the <emu-xref href="#running-execution-context"><a href="https://tc39.es/ecma262/#running-execution-context">running execution context</a></emu-xref>.</li><li>Resume the suspended evaluation of <var>asyncContext</var>. Let <var>result</var> be the value returned by the resumed computation.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: When we return here, <var>asyncContext</var> has already been removed from the <emu-xref href="#execution-context-stack"><a href="https://tc39.es/ecma262/#execution-context-stack">execution context stack</a></emu-xref> and <var>runningContext</var> is the currently <emu-xref href="#running-execution-context"><a href="https://tc39.es/ecma262/#running-execution-context">running execution context</a></emu-xref>.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>result</var> is a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">normal completion</a></emu-xref> with a value of <emu-val>undefined</emu-val>. The possible sources of completion values are <emu-xref aoid="Await"><a href="https://tc39.es/ecma262/#await">Await</a></emu-xref> or, if the async function doesn't await anything, step <emu-xref href="#step-asyncblockstart-return-undefined" id="_ref_4"><a href="#step-asyncblockstart-return-undefined">3.i</a></emu-xref> above.</li><li>Return.</li></ol></emu-alg>
      </emu-clause>
    </emu-clause>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-new-asyncgenerator-aos">
  <h1><span class="secnum">6</span> New AsyncGenerator AOs</h1>
  <p>These factor out functionality from AsyncGenerator.prototype.next and AsyncGenerator.prototype.return and should be used in those methods when this proposal lands in the main specification.</p>

  <emu-clause id="sec-asyncgenerator-next" type="abstract operation" aoid="AsyncGeneratorNext">
    <h1><span class="secnum">6.1</span> AsyncGeneratorNext ( <var>generator</var>, <var>brand</var>, <var>value</var> )</h1>
    <p>The abstract operation AsyncGeneratorNext takes arguments <var>generator</var>, <var>brand</var>, and <var>value</var> (an <emu-xref href="#sec-ecmascript-language-types"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>) and returns an <emu-xref href="#sec-ecmascript-language-types"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>. It performs the following steps when called:</p>
    <emu-alg><ol><li>Let <var>promiseCapability</var> be !&nbsp;<emu-xref aoid="NewPromiseCapability"><a href="https://tc39.es/ecma262/#sec-newpromisecapability">NewPromiseCapability</a></emu-xref>(<emu-xref href="#sec-promise-constructor"><a href="https://tc39.es/ecma262/#sec-promise-constructor">%Promise%</a></emu-xref>).</li><li>Let <var>result</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="AsyncGeneratorValidate"><a href="https://tc39.es/ecma262/#sec-asyncgeneratorvalidate">AsyncGeneratorValidate</a></emu-xref>(<var>generator</var>, <var>brand</var>)).</li><li><emu-xref aoid="IfAbruptRejectPromise"><a href="https://tc39.es/ecma262/#sec-ifabruptrejectpromise">IfAbruptRejectPromise</a></emu-xref>(<var>result</var>, <var>promiseCapability</var>).</li><li>Let <var>state</var> be <var>generator</var>.[[AsyncGeneratorState]].</li><li>If <var>state</var> is <emu-const>completed</emu-const>, then<ol><li>Let <var>iteratorResult</var> be <emu-xref aoid="CreateIterResultObject"><a href="https://tc39.es/ecma262/#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<emu-val>undefined</emu-val>, <emu-val>true</emu-val>).</li><li>Perform !&nbsp;<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>promiseCapability</var>.[[Resolve]], <emu-val>undefined</emu-val>, « <var>iteratorResult</var> »).</li><li>Return <var>promiseCapability</var>.[[Promise]].</li></ol></li><li>Let <var>completion</var> be <emu-xref aoid="NormalCompletion"><a href="https://tc39.es/ecma262/#sec-normalcompletion">NormalCompletion</a></emu-xref>(<var>value</var>).</li><li>Perform <emu-xref aoid="AsyncGeneratorEnqueue"><a href="https://tc39.es/ecma262/#sec-asyncgeneratorenqueue">AsyncGeneratorEnqueue</a></emu-xref>(<var>generator</var>, <var>completion</var>, <var>promiseCapability</var>).</li><li>If <var>state</var> is either <emu-const>suspendedStart</emu-const> or <emu-const>suspendedYield</emu-const>, then<ol><li>Perform <emu-xref aoid="AsyncGeneratorResume"><a href="https://tc39.es/ecma262/#sec-asyncgeneratorresume">AsyncGeneratorResume</a></emu-xref>(<var>generator</var>, <var>completion</var>).</li></ol></li><li>Else,<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>state</var> is either <emu-const>executing</emu-const> or <emu-const>awaiting-return</emu-const>.</li></ol></li><li>Return <var>promiseCapability</var>.[[Promise]].</li></ol></emu-alg>
  </emu-clause>

  <emu-clause id="sec-asyncgenerator-return" type="abstract operation" aoid="AsyncGeneratorReturn">
    <h1><span class="secnum">6.2</span> AsyncGeneratorReturn ( <var>generator</var>, <var>brand</var>, <var>value</var> )</h1>
    <p>The abstract operation AsyncGeneratorReturn takes arguments <var>generator</var>, <var>brand</var>, and <var>value</var> (an <emu-xref href="#sec-ecmascript-language-types"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>) and returns an <emu-xref href="#sec-ecmascript-language-types"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>. It performs the following steps when called:</p>
    <emu-alg><ol><li>Let <var>promiseCapability</var> be !&nbsp;<emu-xref aoid="NewPromiseCapability"><a href="https://tc39.es/ecma262/#sec-newpromisecapability">NewPromiseCapability</a></emu-xref>(<emu-xref href="#sec-promise-constructor"><a href="https://tc39.es/ecma262/#sec-promise-constructor">%Promise%</a></emu-xref>).</li><li>Let <var>result</var> be <emu-xref aoid="Completion"><a href="https://tc39.es/ecma262/#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="AsyncGeneratorValidate"><a href="https://tc39.es/ecma262/#sec-asyncgeneratorvalidate">AsyncGeneratorValidate</a></emu-xref>(<var>generator</var>, <var>brand</var>)).</li><li><emu-xref aoid="IfAbruptRejectPromise"><a href="https://tc39.es/ecma262/#sec-ifabruptrejectpromise">IfAbruptRejectPromise</a></emu-xref>(<var>result</var>, <var>promiseCapability</var>).</li><li>Let <var>completion</var> be <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">Completion Record</a></emu-xref> { [[Type]]: <emu-const>return</emu-const>, [[Value]]: <var>value</var>, [[Target]]: <emu-const>empty</emu-const> }.</li><li>Perform <emu-xref aoid="AsyncGeneratorEnqueue"><a href="https://tc39.es/ecma262/#sec-asyncgeneratorenqueue">AsyncGeneratorEnqueue</a></emu-xref>(<var>generator</var>, <var>completion</var>, <var>promiseCapability</var>).</li><li>Let <var>state</var> be <var>generator</var>.[[AsyncGeneratorState]].</li><li>If <var>state</var> is either <emu-const>suspendedStart</emu-const> or <emu-const>completed</emu-const>, then<ol><li>Set <var>generator</var>.[[AsyncGeneratorState]] to <emu-const>awaiting-return</emu-const>.</li><li>Perform !&nbsp;<emu-xref aoid="AsyncGeneratorAwaitReturn"><a href="https://tc39.es/ecma262/#sec-asyncgeneratorawaitreturn">AsyncGeneratorAwaitReturn</a></emu-xref>(<var>generator</var>).</li></ol></li><li>Else if <var>state</var> is <emu-const>suspendedYield</emu-const>, then<ol><li>Perform <emu-xref aoid="AsyncGeneratorResume"><a href="https://tc39.es/ecma262/#sec-asyncgeneratorresume">AsyncGeneratorResume</a></emu-xref>(<var>generator</var>, <var>completion</var>).</li></ol></li><li>Else,<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>state</var> is either <emu-const>executing</emu-const> or <emu-const>awaiting-return</emu-const>.</li></ol></li><li>Return <var>promiseCapability</var>.[[Promise]].</li></ol></emu-alg>
  </emu-clause>
</emu-clause>
</div></body>